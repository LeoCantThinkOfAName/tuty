var pi=Object.defineProperty;var mi=(r,e,t)=>e in r?pi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ke=(r,e,t)=>(mi(r,typeof e!="symbol"?e+"":e,t),t);import{j as g}from"./jsx-runtime-ffb262ed.js";import{P as Oe,D as yi,H as vi}from"./index-8cecad58.js";import{L as et,b as gi,O as rs,f as bi}from"./index-73a00165.js";import{c as ns,u as wi,L as ss,S as _i}from"./index-435e70c9.js";import{T as Si}from"./index-f670c5c4.js";import{r as b}from"./index-76fb7be0.js";import{f as Oi,g as xi,h as Ci}from"./index.esm-0ba758de.js";import{u as Ae}from"./useTranslation-ca5fece7.js";import{F as ge}from"./chunk-KRPLQIP4-32b7a1c6.js";import{B as Nt}from"./chunk-UVUR7MCU-d5c4f206.js";import{u as is,a as Ei,F as Pi}from"./index.esm-7066814d.js";import{F as hr}from"./chunk-XRMX4GAI-9457f408.js";import{F as fr}from"./InputField-54de1372.js";import{I as pr}from"./chunk-6CVSDS6C-8bee5339.js";import{g as Ti,z as jt,C as ki,F as ji,t as Ri}from"./index-dd75a5e1.js";import{i as We}from"./theme-d5828ebe.js";import{g as Ai,c as Mi}from"./_commonjsHelpers-de833af9.js";import{_ as Bt}from"./iframe-115d0d81.js";import{c as Ii,a as Di,u as $i,b as Ur,C as Fi}from"./chunk-NMI5PSXW-933d1e4b.js";import{C as Li,j as as,d as ft,b as os,f as ie,c as Y}from"./chunk-ZJJGQIVY-b66b1d78.js";import{B as Rt}from"./chunk-PULVB27S-b3d725d2.js";import{a as qi}from"./index-f16a514a.js";import{S as ls}from"./chunk-5PH6ULNP-79b6aba4.js";import{T as Ui}from"./chunk-UBPTU7WB-be418a0b.js";import{s as Ni}from"./chunk-LIR5QAZY-ab9dc091.js";import{g as Bi,i as Vi,a as Hi,u as zi,b as Qi,M as Ki,c as Wi,d as Gi,e as Ji,f as Yi,h as Xi,O as Zi}from"./index-01e88102.js";import{b as us,f as ke,o as cs,r as ea,c as re,s as ta}from"./index-39ab5497.js";import{m as je}from"./index-17e33fe9.js";import{u as At}from"./index-30c8b35e.js";import{m as ra}from"./index-b57d6131.js";import{A as er}from"./PostHeader-147b6686.js";import{T as mr}from"./chunk-2OOHT3W5-91a4dd5c.js";function na(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var sa={duration:5e3,variant:"solid"},Me={theme:Ni,colorMode:"light",toggleColorMode:()=>{},setColorMode:()=>{},defaultOptions:sa,forced:!1};function ia({theme:r=Me.theme,colorMode:e=Me.colorMode,toggleColorMode:t=Me.toggleColorMode,setColorMode:n=Me.setColorMode,defaultOptions:s=Me.defaultOptions,motionVariants:i,toastSpacing:a,component:o,forced:l}=Me){const c={colorMode:e,setColorMode:n,toggleColorMode:t,forced:l};return{ToastContainer:()=>g.jsx(Ui,{theme:r,children:g.jsx(Li.Provider,{value:c,children:g.jsx(Di,{defaultOptions:s,motionVariants:i,toastSpacing:a,component:o})})}),toast:Ii(r.direction,s)}}function aa(r,e,t,n){const s=At(t);return b.useEffect(()=>{const i=typeof r=="function"?r():r??document;if(!(!t||!i))return i.addEventListener(e,s,n),()=>{i.removeEventListener(e,s,n)}},[e,r,n,s,t]),()=>{const i=typeof r=="function"?r():r??document;i==null||i.removeEventListener(e,s,n)}}function oa(r,e={}){const{ssr:t=!0,fallback:n}=e,{getWindow:s}=$i(),i=Array.isArray(r)?r:[r];let a=Array.isArray(n)?n:[n];a=a.filter(c=>c!=null);const[o,l]=b.useState(()=>i.map((c,u)=>({media:c,matches:t?!!a[u]:s().matchMedia(c).matches})));return b.useEffect(()=>{const c=s();l(i.map(h=>({media:h,matches:c.matchMedia(h).matches})));const u=i.map(h=>c.matchMedia(h)),d=h=>{l(f=>f.slice().map(y=>y.media===h.media?{...y,matches:h.matches}:y))};return u.forEach(h=>{typeof h.addListener=="function"?h.addListener(d):h.addEventListener("change",d)}),()=>{u.forEach(h=>{typeof h.removeListener=="function"?h.removeListener(d):h.removeEventListener("change",d)})}},[s]),o.map(c=>c.matches)}function la(r){const{breakpoint:e,hide:t,children:n,ssr:s}=r,[i]=oa(e,{ssr:s});return(t?!i:i)?n:null}var pn=(r,e)=>{var t,n;return(n=(t=r==null?void 0:r.breakpoints)==null?void 0:t[e])!=null?n:e};function ua(r){const{breakpoint:e="",below:t,above:n}=r,s=as(),i=pn(s,t),a=pn(s,n);let o=e;return i?o=`(max-width: ${i})`:a&&(o=`(min-width: ${a})`),o}function ds(r){const{children:e,ssr:t}=r,n=ua(r);return g.jsx(la,{breakpoint:n,hide:!0,ssr:t,children:e})}ds.displayName="Hide";function ca(r){const{key:e}=r;return e.length===1||e.length>1&&/[^a-zA-Z0-9]/.test(e)}function da(r={}){const{timeout:e=300,preventDefault:t=()=>!0}=r,[n,s]=b.useState([]),i=b.useRef(),a=()=>{i.current&&(clearTimeout(i.current),i.current=null)},o=()=>{a(),i.current=setTimeout(()=>{s([]),i.current=null},e)};b.useEffect(()=>a,[]);function l(c){return u=>{if(u.key==="Backspace"){const d=[...n];d.pop(),s(d);return}if(ca(u)){const d=n.concat(u.key);t(u)&&(u.preventDefault(),u.stopPropagation()),s(d),c(d.join("")),o()}}}return l}function ha(r,e,t,n){if(e==null)return n;if(!n)return r.find(a=>t(a).toLowerCase().startsWith(e.toLowerCase()));const s=r.filter(i=>t(i).toLowerCase().startsWith(e.toLowerCase()));if(s.length>0){let i;return s.includes(n)?(i=s.indexOf(n)+1,i===s.length&&(i=0),s[i]):(i=r.indexOf(s[0]),r[i])}return n}function fa(){const r=b.useRef(new Map),e=r.current,t=b.useCallback((s,i,a,o)=>{r.current.set(a,{type:i,el:s,options:o}),s.addEventListener(i,a,o)},[]),n=b.useCallback((s,i,a,o)=>{s.removeEventListener(i,a,o),r.current.delete(a)},[]);return b.useEffect(()=>()=>{e.forEach((s,i)=>{n(s.el,s.type,i,s.options)})},[n,e]),{add:t,remove:n}}function tr(r){const e=r.target,{tagName:t,isContentEditable:n}=e;return t!=="INPUT"&&t!=="TEXTAREA"&&n!==!0}function hs(r={}){const{ref:e,isDisabled:t,isFocusable:n,clickOnEnter:s=!0,clickOnSpace:i=!0,onMouseDown:a,onMouseUp:o,onClick:l,onKeyDown:c,onKeyUp:u,tabIndex:d,onMouseOver:h,onMouseLeave:f,...y}=r,[v,m]=b.useState(!0),[w,_]=b.useState(!1),O=fa(),S=C=>{C&&C.tagName!=="BUTTON"&&m(!1)},k=v?d:d||0,P=t&&!n,T=b.useCallback(C=>{if(t){C.stopPropagation(),C.preventDefault();return}C.currentTarget.focus(),l==null||l(C)},[t,l]),E=b.useCallback(C=>{w&&tr(C)&&(C.preventDefault(),C.stopPropagation(),_(!1),O.remove(document,"keyup",E,!1))},[w,O]),A=b.useCallback(C=>{if(c==null||c(C),t||C.defaultPrevented||C.metaKey||!tr(C.nativeEvent)||v)return;const $=s&&C.key==="Enter";i&&C.key===" "&&(C.preventDefault(),_(!0)),$&&(C.preventDefault(),C.currentTarget.click()),O.add(document,"keyup",E,!1)},[t,v,c,s,i,O,E]),j=b.useCallback(C=>{if(u==null||u(C),t||C.defaultPrevented||C.metaKey||!tr(C.nativeEvent)||v)return;i&&C.key===" "&&(C.preventDefault(),_(!1),C.currentTarget.click())},[i,v,t,u]),M=b.useCallback(C=>{C.button===0&&(_(!1),O.remove(document,"mouseup",M,!1))},[O]),U=b.useCallback(C=>{if(C.button!==0)return;if(t){C.stopPropagation(),C.preventDefault();return}v||_(!0),C.currentTarget.focus({preventScroll:!0}),O.add(document,"mouseup",M,!1),a==null||a(C)},[t,v,a,O,M]),L=b.useCallback(C=>{C.button===0&&(v||_(!1),o==null||o(C))},[o,v]),p=b.useCallback(C=>{if(t){C.preventDefault();return}h==null||h(C)},[t,h]),x=b.useCallback(C=>{w&&(C.preventDefault(),_(!1)),f==null||f(C)},[w,f]),R=je(e,S);return v?{...y,ref:R,type:"button","aria-disabled":P?void 0:t,disabled:P,onClick:T,onMouseDown:a,onMouseUp:o,onKeyUp:u,onKeyDown:c,onMouseOver:h,onMouseLeave:f}:{...y,ref:R,role:"button","data-active":us(w),"aria-disabled":t?"true":void 0,tabIndex:P?void 0:k,onClick:T,onMouseDown:U,onMouseUp:L,onKeyUp:j,onKeyDown:A,onMouseOver:p,onMouseLeave:x}}function pa(r){const e=r.current;if(!e)return!1;const t=Bi(e);return!t||e.contains(t)?!1:!!Vi(t)}function ma(r,e){const{shouldFocus:t,visible:n,focusRef:s}=e,i=t&&!n;Ur(()=>{if(!i||pa(r))return;const a=(s==null?void 0:s.current)||r.current;let o;if(a)return o=requestAnimationFrame(()=>{a.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(o)}},[i,r,s])}var Ie=(r,e)=>({var:r,varRef:e?`var(${r}, ${e})`:`var(${r})`}),G={arrowShadowColor:Ie("--popper-arrow-shadow-color"),arrowSize:Ie("--popper-arrow-size","8px"),arrowSizeHalf:Ie("--popper-arrow-size-half"),arrowBg:Ie("--popper-arrow-bg"),transformOrigin:Ie("--popper-transform-origin"),arrowOffset:Ie("--popper-arrow-offset")};function ya(r){if(r.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(r.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(r.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(r.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var va={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},ga=r=>va[r],mn={scroll:!0,resize:!0};function ba(r){let e;return typeof r=="object"?e={enabled:!0,options:{...mn,...r}}:e={enabled:r,options:mn},e}var wa={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:r})=>{r.styles.popper.width=`${r.rects.reference.width}px`},effect:({state:r})=>()=>{const e=r.elements.reference;r.elements.popper.style.width=`${e.offsetWidth}px`}},_a={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:r})=>{yn(r)},effect:({state:r})=>()=>{yn(r)}},yn=r=>{r.elements.popper.style.setProperty(G.transformOrigin.var,ga(r.placement))},Sa={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:r})=>{Oa(r)}},Oa=r=>{var e;if(!r.placement)return;const t=xa(r.placement);if((e=r.elements)!=null&&e.arrow&&t){Object.assign(r.elements.arrow.style,{[t.property]:t.value,width:G.arrowSize.varRef,height:G.arrowSize.varRef,zIndex:-1});const n={[G.arrowSizeHalf.var]:`calc(${G.arrowSize.varRef} / 2 - 1px)`,[G.arrowOffset.var]:`calc(${G.arrowSizeHalf.varRef} * -1)`};for(const s in n)r.elements.arrow.style.setProperty(s,n[s])}},xa=r=>{if(r.startsWith("top"))return{property:"bottom",value:G.arrowOffset.varRef};if(r.startsWith("bottom"))return{property:"top",value:G.arrowOffset.varRef};if(r.startsWith("left"))return{property:"right",value:G.arrowOffset.varRef};if(r.startsWith("right"))return{property:"left",value:G.arrowOffset.varRef}},Ca={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:r})=>{vn(r)},effect:({state:r})=>()=>{vn(r)}},vn=r=>{if(!r.elements.arrow)return;const e=r.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const t=ya(r.placement);t&&e.style.setProperty("--popper-arrow-default-shadow",t),Object.assign(e.style,{transform:"rotate(45deg)",background:G.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},Ea={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},Pa={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function Ta(r,e="ltr"){var t,n;const s=((t=Ea[r])==null?void 0:t[e])||r;return e==="ltr"?s:(n=Pa[r])!=null?n:s}var z="top",ne="bottom",se="right",Q="left",Nr="auto",pt=[z,ne,se,Q],Le="start",ot="end",ka="clippingParents",fs="viewport",Ge="popper",ja="reference",gn=pt.reduce(function(r,e){return r.concat([e+"-"+Le,e+"-"+ot])},[]),ps=[].concat(pt,[Nr]).reduce(function(r,e){return r.concat([e,e+"-"+Le,e+"-"+ot])},[]),Ra="beforeRead",Aa="read",Ma="afterRead",Ia="beforeMain",Da="main",$a="afterMain",Fa="beforeWrite",La="write",qa="afterWrite",Ua=[Ra,Aa,Ma,Ia,Da,$a,Fa,La,qa];function de(r){return r?(r.nodeName||"").toLowerCase():null}function J(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function Re(r){var e=J(r).Element;return r instanceof e||r instanceof Element}function te(r){var e=J(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function Br(r){if(typeof ShadowRoot>"u")return!1;var e=J(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function Na(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},s=e.attributes[t]||{},i=e.elements[t];!te(i)||!de(i)||(Object.assign(i.style,n),Object.keys(s).forEach(function(a){var o=s[a];o===!1?i.removeAttribute(a):i.setAttribute(a,o===!0?"":o)}))})}function Ba(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var s=e.elements[n],i=e.attributes[n]||{},a=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),o=a.reduce(function(l,c){return l[c]="",l},{});!te(s)||!de(s)||(Object.assign(s.style,o),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const Va={name:"applyStyles",enabled:!0,phase:"write",fn:Na,effect:Ba,requires:["computeStyles"]};function ce(r){return r.split("-")[0]}var Te=Math.max,Mt=Math.min,qe=Math.round;function yr(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ms(){return!/^((?!chrome|android).)*safari/i.test(yr())}function Ue(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=r.getBoundingClientRect(),s=1,i=1;e&&te(r)&&(s=r.offsetWidth>0&&qe(n.width)/r.offsetWidth||1,i=r.offsetHeight>0&&qe(n.height)/r.offsetHeight||1);var a=Re(r)?J(r):window,o=a.visualViewport,l=!ms()&&t,c=(n.left+(l&&o?o.offsetLeft:0))/s,u=(n.top+(l&&o?o.offsetTop:0))/i,d=n.width/s,h=n.height/i;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Vr(r){var e=Ue(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function ys(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&Br(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function fe(r){return J(r).getComputedStyle(r)}function Ha(r){return["table","td","th"].indexOf(de(r))>=0}function be(r){return((Re(r)?r.ownerDocument:r.document)||window.document).documentElement}function Vt(r){return de(r)==="html"?r:r.assignedSlot||r.parentNode||(Br(r)?r.host:null)||be(r)}function bn(r){return!te(r)||fe(r).position==="fixed"?null:r.offsetParent}function za(r){var e=/firefox/i.test(yr()),t=/Trident/i.test(yr());if(t&&te(r)){var n=fe(r);if(n.position==="fixed")return null}var s=Vt(r);for(Br(s)&&(s=s.host);te(s)&&["html","body"].indexOf(de(s))<0;){var i=fe(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function mt(r){for(var e=J(r),t=bn(r);t&&Ha(t)&&fe(t).position==="static";)t=bn(t);return t&&(de(t)==="html"||de(t)==="body"&&fe(t).position==="static")?e:t||za(r)||e}function Hr(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function tt(r,e,t){return Te(r,Mt(e,t))}function Qa(r,e,t){var n=tt(r,e,t);return n>t?t:n}function vs(){return{top:0,right:0,bottom:0,left:0}}function gs(r){return Object.assign({},vs(),r)}function bs(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var Ka=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,gs(typeof e!="number"?e:bs(e,pt))};function Wa(r){var e,t=r.state,n=r.name,s=r.options,i=t.elements.arrow,a=t.modifiersData.popperOffsets,o=ce(t.placement),l=Hr(o),c=[Q,se].indexOf(o)>=0,u=c?"height":"width";if(!(!i||!a)){var d=Ka(s.padding,t),h=Vr(i),f=l==="y"?z:Q,y=l==="y"?ne:se,v=t.rects.reference[u]+t.rects.reference[l]-a[l]-t.rects.popper[u],m=a[l]-t.rects.reference[l],w=mt(i),_=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,O=v/2-m/2,S=d[f],k=_-h[u]-d[y],P=_/2-h[u]/2+O,T=tt(S,P,k),E=l;t.modifiersData[n]=(e={},e[E]=T,e.centerOffset=T-P,e)}}function Ga(r){var e=r.state,t=r.options,n=t.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||ys(e.elements.popper,s)&&(e.elements.arrow=s))}const Ja={name:"arrow",enabled:!0,phase:"main",fn:Wa,effect:Ga,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ne(r){return r.split("-")[1]}var Ya={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xa(r,e){var t=r.x,n=r.y,s=e.devicePixelRatio||1;return{x:qe(t*s)/s||0,y:qe(n*s)/s||0}}function wn(r){var e,t=r.popper,n=r.popperRect,s=r.placement,i=r.variation,a=r.offsets,o=r.position,l=r.gpuAcceleration,c=r.adaptive,u=r.roundOffsets,d=r.isFixed,h=a.x,f=h===void 0?0:h,y=a.y,v=y===void 0?0:y,m=typeof u=="function"?u({x:f,y:v}):{x:f,y:v};f=m.x,v=m.y;var w=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),O=Q,S=z,k=window;if(c){var P=mt(t),T="clientHeight",E="clientWidth";if(P===J(t)&&(P=be(t),fe(P).position!=="static"&&o==="absolute"&&(T="scrollHeight",E="scrollWidth")),P=P,s===z||(s===Q||s===se)&&i===ot){S=ne;var A=d&&P===k&&k.visualViewport?k.visualViewport.height:P[T];v-=A-n.height,v*=l?1:-1}if(s===Q||(s===z||s===ne)&&i===ot){O=se;var j=d&&P===k&&k.visualViewport?k.visualViewport.width:P[E];f-=j-n.width,f*=l?1:-1}}var M=Object.assign({position:o},c&&Ya),U=u===!0?Xa({x:f,y:v},J(t)):{x:f,y:v};if(f=U.x,v=U.y,l){var L;return Object.assign({},M,(L={},L[S]=_?"0":"",L[O]=w?"0":"",L.transform=(k.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",L))}return Object.assign({},M,(e={},e[S]=_?v+"px":"",e[O]=w?f+"px":"",e.transform="",e))}function Za(r){var e=r.state,t=r.options,n=t.gpuAcceleration,s=n===void 0?!0:n,i=t.adaptive,a=i===void 0?!0:i,o=t.roundOffsets,l=o===void 0?!0:o,c={placement:ce(e.placement),variation:Ne(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,wn(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,wn(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const eo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Za,data:{}};var bt={passive:!0};function to(r){var e=r.state,t=r.instance,n=r.options,s=n.scroll,i=s===void 0?!0:s,a=n.resize,o=a===void 0?!0:a,l=J(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",t.update,bt)}),o&&l.addEventListener("resize",t.update,bt),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",t.update,bt)}),o&&l.removeEventListener("resize",t.update,bt)}}const ro={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:to,data:{}};var no={left:"right",right:"left",bottom:"top",top:"bottom"};function Tt(r){return r.replace(/left|right|bottom|top/g,function(e){return no[e]})}var so={start:"end",end:"start"};function _n(r){return r.replace(/start|end/g,function(e){return so[e]})}function zr(r){var e=J(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function Qr(r){return Ue(be(r)).left+zr(r).scrollLeft}function io(r,e){var t=J(r),n=be(r),s=t.visualViewport,i=n.clientWidth,a=n.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;var c=ms();(c||!c&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:o+Qr(r),y:l}}function ao(r){var e,t=be(r),n=zr(r),s=(e=r.ownerDocument)==null?void 0:e.body,i=Te(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=Te(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),o=-n.scrollLeft+Qr(r),l=-n.scrollTop;return fe(s||t).direction==="rtl"&&(o+=Te(t.clientWidth,s?s.clientWidth:0)-i),{width:i,height:a,x:o,y:l}}function Kr(r){var e=fe(r),t=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+n)}function ws(r){return["html","body","#document"].indexOf(de(r))>=0?r.ownerDocument.body:te(r)&&Kr(r)?r:ws(Vt(r))}function rt(r,e){var t;e===void 0&&(e=[]);var n=ws(r),s=n===((t=r.ownerDocument)==null?void 0:t.body),i=J(n),a=s?[i].concat(i.visualViewport||[],Kr(n)?n:[]):n,o=e.concat(a);return s?o:o.concat(rt(Vt(a)))}function vr(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function oo(r,e){var t=Ue(r,!1,e==="fixed");return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}function Sn(r,e,t){return e===fs?vr(io(r,t)):Re(e)?oo(e,t):vr(ao(be(r)))}function lo(r){var e=rt(Vt(r)),t=["absolute","fixed"].indexOf(fe(r).position)>=0,n=t&&te(r)?mt(r):r;return Re(n)?e.filter(function(s){return Re(s)&&ys(s,n)&&de(s)!=="body"}):[]}function uo(r,e,t,n){var s=e==="clippingParents"?lo(r):[].concat(e),i=[].concat(s,[t]),a=i[0],o=i.reduce(function(l,c){var u=Sn(r,c,n);return l.top=Te(u.top,l.top),l.right=Mt(u.right,l.right),l.bottom=Mt(u.bottom,l.bottom),l.left=Te(u.left,l.left),l},Sn(r,a,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function _s(r){var e=r.reference,t=r.element,n=r.placement,s=n?ce(n):null,i=n?Ne(n):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(s){case z:l={x:a,y:e.y-t.height};break;case ne:l={x:a,y:e.y+e.height};break;case se:l={x:e.x+e.width,y:o};break;case Q:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var c=s?Hr(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case Le:l[c]=l[c]-(e[u]/2-t[u]/2);break;case ot:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function lt(r,e){e===void 0&&(e={});var t=e,n=t.placement,s=n===void 0?r.placement:n,i=t.strategy,a=i===void 0?r.strategy:i,o=t.boundary,l=o===void 0?ka:o,c=t.rootBoundary,u=c===void 0?fs:c,d=t.elementContext,h=d===void 0?Ge:d,f=t.altBoundary,y=f===void 0?!1:f,v=t.padding,m=v===void 0?0:v,w=gs(typeof m!="number"?m:bs(m,pt)),_=h===Ge?ja:Ge,O=r.rects.popper,S=r.elements[y?_:h],k=uo(Re(S)?S:S.contextElement||be(r.elements.popper),l,u,a),P=Ue(r.elements.reference),T=_s({reference:P,element:O,strategy:"absolute",placement:s}),E=vr(Object.assign({},O,T)),A=h===Ge?E:P,j={top:k.top-A.top+w.top,bottom:A.bottom-k.bottom+w.bottom,left:k.left-A.left+w.left,right:A.right-k.right+w.right},M=r.modifiersData.offset;if(h===Ge&&M){var U=M[s];Object.keys(j).forEach(function(L){var p=[se,ne].indexOf(L)>=0?1:-1,x=[z,ne].indexOf(L)>=0?"y":"x";j[L]+=U[x]*p})}return j}function co(r,e){e===void 0&&(e={});var t=e,n=t.placement,s=t.boundary,i=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?ps:l,u=Ne(n),d=u?o?gn:gn.filter(function(y){return Ne(y)===u}):pt,h=d.filter(function(y){return c.indexOf(y)>=0});h.length===0&&(h=d);var f=h.reduce(function(y,v){return y[v]=lt(r,{placement:v,boundary:s,rootBoundary:i,padding:a})[ce(v)],y},{});return Object.keys(f).sort(function(y,v){return f[y]-f[v]})}function ho(r){if(ce(r)===Nr)return[];var e=Tt(r);return[_n(r),e,_n(e)]}function fo(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var s=t.mainAxis,i=s===void 0?!0:s,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,y=f===void 0?!0:f,v=t.allowedAutoPlacements,m=e.options.placement,w=ce(m),_=w===m,O=l||(_||!y?[Tt(m)]:ho(m)),S=[m].concat(O).reduce(function(V,K){return V.concat(ce(K)===Nr?co(e,{placement:K,boundary:u,rootBoundary:d,padding:c,flipVariations:y,allowedAutoPlacements:v}):K)},[]),k=e.rects.reference,P=e.rects.popper,T=new Map,E=!0,A=S[0],j=0;j<S.length;j++){var M=S[j],U=ce(M),L=Ne(M)===Le,p=[z,ne].indexOf(U)>=0,x=p?"width":"height",R=lt(e,{placement:M,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),C=p?L?se:Q:L?ne:z;k[x]>P[x]&&(C=Tt(C));var $=Tt(C),I=[];if(i&&I.push(R[U]<=0),o&&I.push(R[C]<=0,R[$]<=0),I.every(function(V){return V})){A=M,E=!1;break}T.set(M,I)}if(E)for(var X=y?3:1,ae=function(K){var we=S.find(function(Qe){var ue=T.get(Qe);if(ue)return ue.slice(0,K).every(function(Yt){return Yt})});if(we)return A=we,"break"},oe=X;oe>0;oe--){var B=ae(oe);if(B==="break")break}e.placement!==A&&(e.modifiersData[n]._skip=!0,e.placement=A,e.reset=!0)}}const po={name:"flip",enabled:!0,phase:"main",fn:fo,requiresIfExists:["offset"],data:{_skip:!1}};function On(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function xn(r){return[z,se,ne,Q].some(function(e){return r[e]>=0})}function mo(r){var e=r.state,t=r.name,n=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,a=lt(e,{elementContext:"reference"}),o=lt(e,{altBoundary:!0}),l=On(a,n),c=On(o,s,i),u=xn(l),d=xn(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const yo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mo};function vo(r,e,t){var n=ce(r),s=[Q,z].indexOf(n)>=0?-1:1,i=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,a=i[0],o=i[1];return a=a||0,o=(o||0)*s,[Q,se].indexOf(n)>=0?{x:o,y:a}:{x:a,y:o}}function go(r){var e=r.state,t=r.options,n=r.name,s=t.offset,i=s===void 0?[0,0]:s,a=ps.reduce(function(u,d){return u[d]=vo(d,e.rects,i),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=a}const bo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:go};function wo(r){var e=r.state,t=r.name;e.modifiersData[t]=_s({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const _o={name:"popperOffsets",enabled:!0,phase:"read",fn:wo,data:{}};function So(r){return r==="x"?"y":"x"}function Oo(r){var e=r.state,t=r.options,n=r.name,s=t.mainAxis,i=s===void 0?!0:s,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,f=h===void 0?!0:h,y=t.tetherOffset,v=y===void 0?0:y,m=lt(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),w=ce(e.placement),_=Ne(e.placement),O=!_,S=Hr(w),k=So(S),P=e.modifiersData.popperOffsets,T=e.rects.reference,E=e.rects.popper,A=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,j=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(P){if(i){var L,p=S==="y"?z:Q,x=S==="y"?ne:se,R=S==="y"?"height":"width",C=P[S],$=C+m[p],I=C-m[x],X=f?-E[R]/2:0,ae=_===Le?T[R]:E[R],oe=_===Le?-E[R]:-T[R],B=e.elements.arrow,V=f&&B?Vr(B):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:vs(),we=K[p],Qe=K[x],ue=tt(0,T[R],V[R]),Yt=O?T[R]/2-X-ue-we-j.mainAxis:ae-ue-we-j.mainAxis,li=O?-T[R]/2+X+ue+Qe+j.mainAxis:oe+ue+Qe+j.mainAxis,Xt=e.elements.arrow&&mt(e.elements.arrow),ui=Xt?S==="y"?Xt.clientTop||0:Xt.clientLeft||0:0,sn=(L=M==null?void 0:M[S])!=null?L:0,ci=C+Yt-sn-ui,di=C+li-sn,an=tt(f?Mt($,ci):$,C,f?Te(I,di):I);P[S]=an,U[S]=an-C}if(o){var on,hi=S==="x"?z:Q,fi=S==="x"?ne:se,_e=P[k],gt=k==="y"?"height":"width",ln=_e+m[hi],un=_e-m[fi],Zt=[z,Q].indexOf(w)!==-1,cn=(on=M==null?void 0:M[k])!=null?on:0,dn=Zt?ln:_e-T[gt]-E[gt]-cn+j.altAxis,hn=Zt?_e+T[gt]+E[gt]-cn-j.altAxis:un,fn=f&&Zt?Qa(dn,_e,hn):tt(f?dn:ln,_e,f?hn:un);P[k]=fn,U[k]=fn-_e}e.modifiersData[n]=U}}const xo={name:"preventOverflow",enabled:!0,phase:"main",fn:Oo,requiresIfExists:["offset"]};function Co(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Eo(r){return r===J(r)||!te(r)?zr(r):Co(r)}function Po(r){var e=r.getBoundingClientRect(),t=qe(e.width)/r.offsetWidth||1,n=qe(e.height)/r.offsetHeight||1;return t!==1||n!==1}function To(r,e,t){t===void 0&&(t=!1);var n=te(e),s=te(e)&&Po(e),i=be(e),a=Ue(r,s,t),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((de(e)!=="body"||Kr(i))&&(o=Eo(e)),te(e)?(l=Ue(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Qr(i))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function ko(r){var e=new Map,t=new Set,n=[];r.forEach(function(i){e.set(i.name,i)});function s(i){t.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&s(l)}}),n.push(i)}return r.forEach(function(i){t.has(i.name)||s(i)}),n}function jo(r){var e=ko(r);return Ua.reduce(function(t,n){return t.concat(e.filter(function(s){return s.phase===n}))},[])}function Ro(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function Ao(r){var e=r.reduce(function(t,n){var s=t[n.name];return t[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var Cn={placement:"bottom",modifiers:[],strategy:"absolute"};function En(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Mo(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,s=e.defaultOptions,i=s===void 0?Cn:s;return function(o,l,c){c===void 0&&(c=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cn,i),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(w){var _=typeof w=="function"?w(u.options):w;v(),u.options=Object.assign({},i,u.options,_),u.scrollParents={reference:Re(o)?rt(o):o.contextElement?rt(o.contextElement):[],popper:rt(l)};var O=jo(Ao([].concat(n,u.options.modifiers)));return u.orderedModifiers=O.filter(function(S){return S.enabled}),y(),f.update()},forceUpdate:function(){if(!h){var w=u.elements,_=w.reference,O=w.popper;if(En(_,O)){u.rects={reference:To(_,mt(O),u.options.strategy==="fixed"),popper:Vr(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(j){return u.modifiersData[j.name]=Object.assign({},j.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var k=u.orderedModifiers[S],P=k.fn,T=k.options,E=T===void 0?{}:T,A=k.name;typeof P=="function"&&(u=P({state:u,options:E,name:A,instance:f})||u)}}}},update:Ro(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){v(),h=!0}};if(!En(o,l))return f;f.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function y(){u.orderedModifiers.forEach(function(m){var w=m.name,_=m.options,O=_===void 0?{}:_,S=m.effect;if(typeof S=="function"){var k=S({state:u,name:w,instance:f,options:O}),P=function(){};d.push(k||P)}})}function v(){d.forEach(function(m){return m()}),d=[]}return f}}var Io=[ro,_o,eo,Va,bo,po,xo,Ja,yo],Do=Mo({defaultModifiers:Io});function $o(r={}){const{enabled:e=!0,modifiers:t,placement:n="bottom",strategy:s="absolute",arrowPadding:i=8,eventListeners:a=!0,offset:o,gutter:l=8,flip:c=!0,boundary:u="clippingParents",preventOverflow:d=!0,matchWidth:h,direction:f="ltr"}=r,y=b.useRef(null),v=b.useRef(null),m=b.useRef(null),w=Ta(n,f),_=b.useRef(()=>{}),O=b.useCallback(()=>{var j;!e||!y.current||!v.current||((j=_.current)==null||j.call(_),m.current=Do(y.current,v.current,{placement:w,modifiers:[Ca,Sa,_a,{...wa,enabled:!!h},{name:"eventListeners",...ba(a)},{name:"arrow",options:{padding:i}},{name:"offset",options:{offset:o??[0,l]}},{name:"flip",enabled:!!c,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:u}},...t??[]],strategy:s}),m.current.forceUpdate(),_.current=m.current.destroy)},[w,e,t,h,a,i,o,l,c,d,u,s]);b.useEffect(()=>()=>{var j;!y.current&&!v.current&&((j=m.current)==null||j.destroy(),m.current=null)},[]);const S=b.useCallback(j=>{y.current=j,O()},[O]),k=b.useCallback((j={},M=null)=>({...j,ref:je(S,M)}),[S]),P=b.useCallback(j=>{v.current=j,O()},[O]),T=b.useCallback((j={},M=null)=>({...j,ref:je(P,M),style:{...j.style,position:s,minWidth:h?void 0:"max-content",inset:"0 auto auto 0"}}),[s,P,h]),E=b.useCallback((j={},M=null)=>{const{size:U,shadowColor:L,bg:p,style:x,...R}=j;return{...R,ref:M,"data-popper-arrow":"",style:Fo(j)}},[]),A=b.useCallback((j={},M=null)=>({...j,ref:M,"data-popper-arrow-inner":""}),[]);return{update(){var j;(j=m.current)==null||j.update()},forceUpdate(){var j;(j=m.current)==null||j.forceUpdate()},transformOrigin:G.transformOrigin.varRef,referenceRef:S,popperRef:P,getPopperProps:T,getArrowProps:E,getArrowInnerProps:A,getReferenceProps:k}}function Fo(r){const{size:e,shadowColor:t,bg:n,style:s}=r,i={...s,position:"absolute"};return e&&(i["--popper-arrow-size"]=e),t&&(i["--popper-arrow-shadow-color"]=t),n&&(i["--popper-arrow-bg"]=n),i}function Lo(r={}){const{onClose:e,onOpen:t,isOpen:n,id:s}=r,i=At(t),a=At(e),[o,l]=b.useState(r.defaultIsOpen||!1),c=n!==void 0?n:o,u=n!==void 0,d=b.useId(),h=s??`disclosure-${d}`,f=b.useCallback(()=>{u||l(!1),a==null||a()},[u,a]),y=b.useCallback(()=>{u||l(!0),i==null||i()},[u,i]),v=b.useCallback(()=>{c?f():y()},[c,y,f]);function m(_={}){return{..._,"aria-expanded":c,"aria-controls":h,onClick(O){var S;(S=_.onClick)==null||S.call(_,O),v()}}}function w(_={}){return{..._,hidden:!c,id:h}}return{isOpen:c,onOpen:y,onClose:f,onToggle:v,isControlled:u,getButtonProps:m,getDisclosureProps:w}}function qo(r){const{ref:e,handler:t,enabled:n=!0}=r,s=At(t),a=b.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;b.useEffect(()=>{if(!n)return;const o=d=>{rr(d,e)&&(a.isPointerDown=!0)},l=d=>{if(a.ignoreEmulatedMouseEvents){a.ignoreEmulatedMouseEvents=!1;return}a.isPointerDown&&t&&rr(d,e)&&(a.isPointerDown=!1,s(d))},c=d=>{a.ignoreEmulatedMouseEvents=!0,t&&a.isPointerDown&&rr(d,e)&&(a.isPointerDown=!1,s(d))},u=Ss(e.current);return u.addEventListener("mousedown",o,!0),u.addEventListener("mouseup",l,!0),u.addEventListener("touchstart",o,!0),u.addEventListener("touchend",c,!0),()=>{u.removeEventListener("mousedown",o,!0),u.removeEventListener("mouseup",l,!0),u.removeEventListener("touchstart",o,!0),u.removeEventListener("touchend",c,!0)}},[t,e,s,a,n])}function rr(r,e){var t;const n=r.target;return n&&!Ss(n).contains(n)?!1:!((t=e.current)!=null&&t.contains(n))}function Ss(r){var e;return(e=r==null?void 0:r.ownerDocument)!=null?e:document}function Uo(r){const{isOpen:e,ref:t}=r,[n,s]=b.useState(e),[i,a]=b.useState(!1);return b.useEffect(()=>{i||(s(e),a(!0))},[e,i,n]),aa(()=>t.current,"animationend",()=>{s(e)}),{present:!(e?!1:!n),onComplete(){var l;const c=Hi(t.current),u=new c.CustomEvent("animationend",{bubbles:!0});(l=t.current)==null||l.dispatchEvent(u)}}}function Os(r){const{wasSelected:e,enabled:t,isSelected:n,mode:s="unmount"}=r;return!!(!t||n||s==="keepMounted"&&e)}var[No,Bo,Vo,Ho]=ns(),[zo,yt]=ft({strict:!1,name:"MenuContext"});function Qo(r,...e){const t=b.useId(),n=r||t;return b.useMemo(()=>e.map(s=>`${s}-${n}`),[n,e])}function xs(r){var e;return(e=r==null?void 0:r.ownerDocument)!=null?e:document}function Pn(r){return xs(r).activeElement===r}function Ko(r={}){const{id:e,closeOnSelect:t=!0,closeOnBlur:n=!0,initialFocusRef:s,autoSelect:i=!0,isLazy:a,isOpen:o,defaultIsOpen:l,onClose:c,onOpen:u,placement:d="bottom-start",lazyBehavior:h="unmount",direction:f,computePositionOnMount:y=!1,...v}=r,m=b.useRef(null),w=b.useRef(null),_=Vo(),O=b.useCallback(()=>{requestAnimationFrame(()=>{var B;(B=m.current)==null||B.focus({preventScroll:!1})})},[]),S=b.useCallback(()=>{const B=setTimeout(()=>{var V;if(s)(V=s.current)==null||V.focus();else{const K=_.firstEnabled();K&&L(K.index)}});$.current.add(B)},[_,s]),k=b.useCallback(()=>{const B=setTimeout(()=>{const V=_.lastEnabled();V&&L(V.index)});$.current.add(B)},[_]),P=b.useCallback(()=>{u==null||u(),i?S():O()},[i,S,O,u]),{isOpen:T,onOpen:E,onClose:A,onToggle:j}=Lo({isOpen:o,defaultIsOpen:l,onClose:c,onOpen:P});qo({enabled:T&&n,ref:m,handler:B=>{var V;(V=w.current)!=null&&V.contains(B.target)||A()}});const M=$o({...v,enabled:T||y,placement:d,direction:f}),[U,L]=b.useState(-1);Ur(()=>{T||L(-1)},[T]),ma(m,{focusRef:w,visible:T,shouldFocus:!0});const p=Uo({isOpen:T,ref:m}),[x,R]=Qo(e,"menu-button","menu-list"),C=b.useCallback(()=>{E(),O()},[E,O]),$=b.useRef(new Set([]));el(()=>{$.current.forEach(B=>clearTimeout(B)),$.current.clear()});const I=b.useCallback(()=>{E(),S()},[S,E]),X=b.useCallback(()=>{E(),k()},[E,k]),ae=b.useCallback(()=>{var B,V;const K=xs(m.current),we=(B=m.current)==null?void 0:B.contains(K.activeElement);if(!(T&&!we))return;const ue=(V=_.item(U))==null?void 0:V.node;ue==null||ue.focus()},[T,U,_]),oe=b.useRef(null);return{openAndFocusMenu:C,openAndFocusFirstItem:I,openAndFocusLastItem:X,onTransitionEnd:ae,unstable__animationState:p,descendants:_,popper:M,buttonId:x,menuId:R,forceUpdate:M.forceUpdate,orientation:"vertical",isOpen:T,onToggle:j,onOpen:E,onClose:A,menuRef:m,buttonRef:w,focusedIndex:U,closeOnSelect:t,closeOnBlur:n,autoSelect:i,setFocusedIndex:L,isLazy:a,lazyBehavior:h,initialFocusRef:s,rafId:oe}}function Wo(r={},e=null){const t=yt(),{onToggle:n,popper:s,openAndFocusFirstItem:i,openAndFocusLastItem:a}=t,o=b.useCallback(l=>{const c=l.key,d={Enter:i,ArrowDown:i,ArrowUp:a}[c];d&&(l.preventDefault(),l.stopPropagation(),d(l))},[i,a]);return{...r,ref:je(t.buttonRef,e,s.referenceRef),id:t.buttonId,"data-active":us(t.isOpen),"aria-expanded":t.isOpen,"aria-haspopup":"menu","aria-controls":t.menuId,onClick:ke(r.onClick,n),onKeyDown:ke(r.onKeyDown,o)}}function gr(r){var e;return Xo(r)&&!!((e=r==null?void 0:r.getAttribute("role"))!=null&&e.startsWith("menuitem"))}function Go(r={},e=null){const t=yt();if(!t)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:n,setFocusedIndex:s,menuRef:i,isOpen:a,onClose:o,menuId:l,isLazy:c,lazyBehavior:u,unstable__animationState:d}=t,h=Bo(),f=da({preventDefault:w=>w.key!==" "&&gr(w.target)}),y=b.useCallback(w=>{if(!w.currentTarget.contains(w.target))return;const _=w.key,S={Tab:P=>P.preventDefault(),Escape:o,ArrowDown:()=>{const P=h.nextEnabled(n);P&&s(P.index)},ArrowUp:()=>{const P=h.prevEnabled(n);P&&s(P.index)}}[_];if(S){w.preventDefault(),S(w);return}const k=f(P=>{const T=ha(h.values(),P,E=>{var A,j;return(j=(A=E==null?void 0:E.node)==null?void 0:A.textContent)!=null?j:""},h.item(n));if(T){const E=h.indexOf(T.node);s(E)}});gr(w.target)&&k(w)},[h,n,f,o,s]),v=b.useRef(!1);a&&(v.current=!0);const m=Os({wasSelected:v.current,enabled:c,mode:u,isSelected:d.present});return{...r,ref:je(i,e),children:m?r.children:null,tabIndex:-1,role:"menu",id:l,style:{...r.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:ke(r.onKeyDown,y)}}function Jo(r={}){const{popper:e,isOpen:t}=yt();return e.getPopperProps({...r,style:{visibility:t?"visible":"hidden",...r.style}})}function Yo(r={},e=null){const{onMouseEnter:t,onMouseMove:n,onMouseLeave:s,onClick:i,onFocus:a,isDisabled:o,isFocusable:l,closeOnSelect:c,type:u,...d}=r,h=yt(),{setFocusedIndex:f,focusedIndex:y,closeOnSelect:v,onClose:m,menuRef:w,isOpen:_,menuId:O,rafId:S}=h,k=b.useRef(null),P=`${O}-menuitem-${b.useId()}`,{index:T,register:E}=Ho({disabled:o&&!l}),A=b.useCallback(C=>{t==null||t(C),!o&&f(T)},[f,T,o,t]),j=b.useCallback(C=>{n==null||n(C),k.current&&!Pn(k.current)&&A(C)},[A,n]),M=b.useCallback(C=>{s==null||s(C),!o&&f(-1)},[f,o,s]),U=b.useCallback(C=>{i==null||i(C),gr(C.currentTarget)&&(c??v)&&m()},[m,i,v,c]),L=b.useCallback(C=>{a==null||a(C),f(T)},[f,a,T]),p=T===y,x=o&&!l;Ur(()=>{_&&(p&&!x&&k.current?(S.current&&cancelAnimationFrame(S.current),S.current=requestAnimationFrame(()=>{var C;(C=k.current)==null||C.focus(),S.current=null})):w.current&&!Pn(w.current)&&w.current.focus({preventScroll:!0}))},[p,x,w,_]);const R=hs({onClick:U,onFocus:L,onMouseEnter:A,onMouseMove:j,onMouseLeave:M,ref:je(E,k,e),isDisabled:o,isFocusable:l});return{...d,...R,type:u??R.type,id:P,role:"menuitem",tabIndex:p?0:-1}}function Xo(r){var e;if(!Zo(r))return!1;const t=(e=r.ownerDocument.defaultView)!=null?e:window;return r instanceof t.HTMLElement}function Zo(r){return r!=null&&typeof r=="object"&&"nodeType"in r&&r.nodeType===Node.ELEMENT_NODE}function el(r,e=[]){return b.useEffect(()=>()=>r(),e)}var[tl,Ve]=ft({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Cs=r=>{const{children:e}=r,t=os("Menu",r),n=cs(r),{direction:s}=as(),{descendants:i,...a}=Ko({...n,direction:s}),o=b.useMemo(()=>a,[a]),{isOpen:l,onClose:c,forceUpdate:u}=o;return g.jsx(No,{value:i,children:g.jsx(zo,{value:o,children:g.jsx(tl,{value:t,children:ea(e,{isOpen:l,onClose:c,forceUpdate:u})})})})};Cs.displayName="Menu";var Es=ie((r,e)=>{const t=Ve();return g.jsx(Y.span,{ref:e,...r,__css:t.command,className:"chakra-menu__command"})});Es.displayName="MenuCommand";var rl=ie((r,e)=>{const{type:t,...n}=r,s=Ve(),i=n.as||t?t??void 0:"button",a=b.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...s.item}),[s.item]);return g.jsx(Y.button,{ref:e,type:i,...n,__css:a})}),Ps=r=>{const{className:e,children:t,...n}=r,s=Ve(),i=b.Children.only(t),a=b.isValidElement(i)?b.cloneElement(i,{focusable:"false","aria-hidden":!0,className:re("chakra-menu__icon",i.props.className)}):null,o=re("chakra-menu__icon-wrapper",e);return g.jsx(Y.span,{className:o,...n,__css:s.icon,children:a})};Ps.displayName="MenuIcon";var Ye=ie((r,e)=>{const{icon:t,iconSpacing:n="0.75rem",command:s,commandSpacing:i="0.75rem",children:a,...o}=r,l=Yo(o,e),u=t||s?g.jsx("span",{style:{pointerEvents:"none",flex:1},children:a}):a;return g.jsxs(rl,{...l,className:re("chakra-menu__menuitem",l.className),children:[t&&g.jsx(Ps,{fontSize:"0.8em",marginEnd:n,children:t}),u,s&&g.jsx(Es,{marginStart:i,children:s})]})});Ye.displayName="MenuItem";var nl={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},sl=Y(ra.div),Ts=ie(function(e,t){var n,s;const{rootProps:i,motionProps:a,...o}=e,{isOpen:l,onTransitionEnd:c,unstable__animationState:u}=yt(),d=Go(o,t),h=Jo(i),f=Ve();return g.jsx(Y.div,{...h,__css:{zIndex:(s=e.zIndex)!=null?s:(n=f.list)==null?void 0:n.zIndex},children:g.jsx(sl,{variants:nl,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...f.list},...a,className:re("chakra-menu__menu-list",d.className),...d,onUpdate:c,onAnimationComplete:ta(u.onComplete,d.onAnimationComplete)})})});Ts.displayName="MenuList";var il=ie((r,e)=>{const t=Ve();return g.jsx(Y.button,{ref:e,...r,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...t.button}})}),ks=ie((r,e)=>{const{children:t,as:n,...s}=r,i=Wo(s,e),a=n||il;return g.jsx(a,{...i,className:re("chakra-menu__menu-button",r.className),children:g.jsx(Y.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:r.children})})});ks.displayName="MenuButton";var js=r=>{const{className:e,...t}=r,n=Ve();return g.jsx(Y.hr,{"aria-orientation":"horizontal",className:re("chakra-menu__divider",e),...t,__css:n.divider})};js.displayName="MenuDivider";var Rs=ie((r,e)=>{const{onClick:t,className:n,...s}=r,{onClose:i}=zi(),a=re("chakra-modal__close-btn",n),o=Qi();return g.jsx(Fi,{ref:e,__css:o.closeButton,className:a,onClick:ke(t,l=>{l.stopPropagation(),i()}),...s})});Rs.displayName="ModalCloseButton";var[al,ol,ll,ul]=ns();function cl(r){var e;const{defaultIndex:t,onChange:n,index:s,isManual:i,isLazy:a,lazyBehavior:o="unmount",orientation:l="horizontal",direction:c="ltr",...u}=r,[d,h]=b.useState(t??0),[f,y]=wi({defaultValue:t??0,value:s,onChange:n});b.useEffect(()=>{s!=null&&h(s)},[s]);const v=ll(),m=b.useId();return{id:`tabs-${(e=r.id)!=null?e:m}`,selectedIndex:f,focusedIndex:d,setSelectedIndex:y,setFocusedIndex:h,isManual:i,isLazy:a,lazyBehavior:o,orientation:l,descendants:v,direction:c,htmlProps:u}}var[dl,Ht]=ft({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function hl(r){const{focusedIndex:e,orientation:t,direction:n}=Ht(),s=ol(),i=b.useCallback(a=>{const o=()=>{var _;const O=s.nextEnabled(e);O&&((_=O.node)==null||_.focus())},l=()=>{var _;const O=s.prevEnabled(e);O&&((_=O.node)==null||_.focus())},c=()=>{var _;const O=s.firstEnabled();O&&((_=O.node)==null||_.focus())},u=()=>{var _;const O=s.lastEnabled();O&&((_=O.node)==null||_.focus())},d=t==="horizontal",h=t==="vertical",f=a.key,y=n==="ltr"?"ArrowLeft":"ArrowRight",v=n==="ltr"?"ArrowRight":"ArrowLeft",w={[y]:()=>d&&l(),[v]:()=>d&&o(),ArrowDown:()=>h&&o(),ArrowUp:()=>h&&l(),Home:c,End:u}[f];w&&(a.preventDefault(),w(a))},[s,e,t,n]);return{...r,role:"tablist","aria-orientation":t,onKeyDown:ke(r.onKeyDown,i)}}function fl(r){const{isDisabled:e=!1,isFocusable:t=!1,...n}=r,{setSelectedIndex:s,isManual:i,id:a,setFocusedIndex:o,selectedIndex:l}=Ht(),{index:c,register:u}=ul({disabled:e&&!t}),d=c===l,h=()=>{s(c)},f=()=>{o(c),!i&&!(e&&t)&&s(c)},y=hs({...n,ref:je(u,r.ref),isDisabled:e,isFocusable:t,onClick:ke(r.onClick,h)}),v="button";return{...y,id:As(a,c),role:"tab",tabIndex:d?0:-1,type:v,"aria-selected":d,"aria-controls":Ms(a,c),onFocus:e?void 0:ke(r.onFocus,f)}}var[pl,ml]=ft({});function yl(r){const e=Ht(),{id:t,selectedIndex:n}=e,i=Ti(r.children).map((a,o)=>b.createElement(pl,{key:o,value:{isSelected:o===n,id:Ms(t,o),tabId:As(t,o),selectedIndex:n}},a));return{...r,children:i}}function vl(r){const{children:e,...t}=r,{isLazy:n,lazyBehavior:s}=Ht(),{isSelected:i,id:a,tabId:o}=ml(),l=b.useRef(!1);i&&(l.current=!0);const c=Os({wasSelected:l.current,isSelected:i,enabled:n,mode:s});return{tabIndex:0,...t,children:c?e:null,role:"tabpanel","aria-labelledby":o,hidden:!i,id:a}}function As(r,e){return`${r}--tab-${e}`}function Ms(r,e){return`${r}--tabpanel-${e}`}var[gl,zt]=ft({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),Is=ie(function(e,t){const n=os("Tabs",e),{children:s,className:i,...a}=cs(e),{htmlProps:o,descendants:l,...c}=cl(a),u=b.useMemo(()=>c,[c]),{isFitted:d,...h}=o;return g.jsx(al,{value:l,children:g.jsx(dl,{value:u,children:g.jsx(gl,{value:n,children:g.jsx(Y.div,{className:re("chakra-tabs",i),ref:t,...h,__css:n.root,children:s})})})})});Is.displayName="Tabs";var Ds=ie(function(e,t){const n=hl({...e,ref:t}),i={display:"flex",...zt().tablist};return g.jsx(Y.div,{...n,className:re("chakra-tabs__tablist",e.className),__css:i})});Ds.displayName="TabList";var $s=ie(function(e,t){const n=vl({...e,ref:t}),s=zt();return g.jsx(Y.div,{outline:"0",...n,className:re("chakra-tabs__tab-panel",e.className),__css:s.tabpanel})});$s.displayName="TabPanel";var Fs=ie(function(e,t){const n=yl(e),s=zt();return g.jsx(Y.div,{...n,width:"100%",ref:t,className:re("chakra-tabs__tab-panels",e.className),__css:s.tabpanels})});Fs.displayName="TabPanels";var Ls=ie(function(e,t){const n=zt(),s=fl({...e,ref:t}),i={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...n.tab};return g.jsx(Y.button,{...s,className:re("chakra-tabs__tab",e.className),__css:i})});Ls.displayName="Tab";const It=r=>g.jsx(ss,{mr:"5",_hover:{textDecor:"none",opacity:.8},as:et,...r});try{It.displayName="HeaderLink",It.__docgenInfo={description:"",displayName:"HeaderLink",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"As | undefined"}},_hover:{defaultValue:null,description:"Styles for CSS selector `&:hover`",name:"_hover",required:!1,type:{name:"SystemStyleObject | undefined"}},_active:{defaultValue:null,description:"Styles for CSS Selector `&:active`",name:"_active",required:!1,type:{name:"SystemStyleObject | undefined"}},_focus:{defaultValue:null,description:"Styles for CSS selector `&:focus`",name:"_focus",required:!1,type:{name:"SystemStyleObject | undefined"}},_highlighted:{defaultValue:null,description:"Styles for the highlighted state.",name:"_highlighted",required:!1,type:{name:"SystemStyleObject | undefined"}},_focusWithin:{defaultValue:null,description:"Styles to apply when a child of this element has received focus\n- CSS Selector `&:focus-within`",name:"_focusWithin",required:!1,type:{name:"SystemStyleObject | undefined"}},_focusVisible:{defaultValue:null,description:"Styles to apply when this element has received focus via tabbing\n- CSS Selector `&:focus-visible`",name:"_focusVisible",required:!1,type:{name:"SystemStyleObject | undefined"}},_disabled:{defaultValue:null,description:"Styles to apply when this element is disabled. The passed styles are applied to these CSS selectors:\n- `&[aria-disabled=true]`\n- `&:disabled`\n- `&[data-disabled]`\n- `&[disabled]`",name:"_disabled",required:!1,type:{name:"SystemStyleObject | undefined"}},_readOnly:{defaultValue:null,description:"Styles for CSS Selector `&:readonly`",name:"_readOnly",required:!1,type:{name:"SystemStyleObject | undefined"}},_before:{defaultValue:null,description:'Styles for CSS selector `&::before`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _before={{content:`""` }}/>\n```',name:"_before",required:!1,type:{name:"SystemStyleObject | undefined"}},_after:{defaultValue:null,description:'Styles for CSS selector `&::after`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _after={{content:`""` }}/>\n```',name:"_after",required:!1,type:{name:"SystemStyleObject | undefined"}},_empty:{defaultValue:null,description:"Styles for CSS selector `&:empty`",name:"_empty",required:!1,type:{name:"SystemStyleObject | undefined"}},_expanded:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-expanded` is `true`\n- CSS selector `&[aria-expanded=true]`",name:"_expanded",required:!1,type:{name:"SystemStyleObject | undefined"}},_checked:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `true`\n- CSS selector `&[aria-checked=true]`",name:"_checked",required:!1,type:{name:"SystemStyleObject | undefined"}},_grabbed:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-grabbed` is `true`\n- CSS selector `&[aria-grabbed=true]`",name:"_grabbed",required:!1,type:{name:"SystemStyleObject | undefined"}},_pressed:{defaultValue:null,description:'Styles for CSS Selector `&[aria-pressed=true]`\nTypically used to style the current "pressed" state of toggle buttons',name:"_pressed",required:!1,type:{name:"SystemStyleObject | undefined"}},_invalid:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-invalid` is `true`\n- CSS selector `&[aria-invalid=true]`",name:"_invalid",required:!1,type:{name:"SystemStyleObject | undefined"}},_valid:{defaultValue:null,description:"Styles for the valid state\n- CSS selector `&[data-valid], &[data-state=valid]`",name:"_valid",required:!1,type:{name:"SystemStyleObject | undefined"}},_loading:{defaultValue:null,description:"Styles for CSS Selector `&[aria-busy=true]` or `&[data-loading=true]`.\nUseful for styling loading states",name:"_loading",required:!1,type:{name:"SystemStyleObject | undefined"}},_selected:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-selected` is `true`\n\n- CSS selector `&[aria-selected=true]`",name:"_selected",required:!1,type:{name:"SystemStyleObject | undefined"}},_hidden:{defaultValue:null,description:"Styles for CSS Selector `[hidden=true]`",name:"_hidden",required:!1,type:{name:"SystemStyleObject | undefined"}},_autofill:{defaultValue:null,description:"Styles for CSS Selector `&:-webkit-autofill`",name:"_autofill",required:!1,type:{name:"SystemStyleObject | undefined"}},_even:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(even)`",name:"_even",required:!1,type:{name:"SystemStyleObject | undefined"}},_odd:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(odd)`",name:"_odd",required:!1,type:{name:"SystemStyleObject | undefined"}},_first:{defaultValue:null,description:"Styles for CSS Selector `&:first-of-type`",name:"_first",required:!1,type:{name:"SystemStyleObject | undefined"}},_firstLetter:{defaultValue:null,description:"Styles for CSS selector `&::first-letter`\n\nNOTE: This selector is only applied for block-level elements and not preceded by an image or table.\n@example ```jsx\n<Text _firstLetter={{ textDecoration: 'underline' }}>Once upon a time</Text>\n```",name:"_firstLetter",required:!1,type:{name:"SystemStyleObject | undefined"}},_last:{defaultValue:null,description:"Styles for CSS Selector `&:last-of-type`",name:"_last",required:!1,type:{name:"SystemStyleObject | undefined"}},_notFirst:{defaultValue:null,description:"Styles for CSS Selector `&:not(:first-of-type)`",name:"_notFirst",required:!1,type:{name:"SystemStyleObject | undefined"}},_notLast:{defaultValue:null,description:"Styles for CSS Selector `&:not(:last-of-type)`",name:"_notLast",required:!1,type:{name:"SystemStyleObject | undefined"}},_visited:{defaultValue:null,description:"Styles for CSS Selector `&:visited`",name:"_visited",required:!1,type:{name:"SystemStyleObject | undefined"}},_activeLink:{defaultValue:null,description:"Used to style the active link in a navigation\nStyles for CSS Selector `&[aria-current=page]`",name:"_activeLink",required:!1,type:{name:"SystemStyleObject | undefined"}},_activeStep:{defaultValue:null,description:"Used to style the current step within a process\nStyles for CSS Selector `&[aria-current=step]`",name:"_activeStep",required:!1,type:{name:"SystemStyleObject | undefined"}},_indeterminate:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `mixed`\n- CSS selector `&[aria-checked=mixed]`",name:"_indeterminate",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupHover:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is hovered",name:"_groupHover",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerHover:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is hovered",name:"_peerHover",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupFocus:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is focused",name:"_groupFocus",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerFocus:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is focused",name:"_peerFocus",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupFocusVisible:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has visible focus",name:"_groupFocusVisible",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerFocusVisible:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer`or `data-peer` has visible focus",name:"_peerFocusVisible",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupActive:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is active",name:"_groupActive",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerActive:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is active",name:"_peerActive",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupDisabled:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is disabled",name:"_groupDisabled",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerDisabled:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is disabled",name:"_peerDisabled",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupInvalid:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is invalid",name:"_groupInvalid",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerInvalid:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is invalid",name:"_peerInvalid",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupChecked:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is checked",name:"_groupChecked",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerChecked:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is checked",name:"_peerChecked",required:!1,type:{name:"SystemStyleObject | undefined"}},_groupFocusWithin:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has focus within",name:"_groupFocusWithin",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerFocusWithin:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has focus within",name:"_peerFocusWithin",required:!1,type:{name:"SystemStyleObject | undefined"}},_peerPlaceholderShown:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has placeholder shown",name:"_peerPlaceholderShown",required:!1,type:{name:"SystemStyleObject | undefined"}},_placeholder:{defaultValue:null,description:"Styles for CSS Selector `&::placeholder`.",name:"_placeholder",required:!1,type:{name:"SystemStyleObject | undefined"}},_placeholderShown:{defaultValue:null,description:"Styles for CSS Selector `&:placeholder-shown`.",name:"_placeholderShown",required:!1,type:{name:"SystemStyleObject | undefined"}},_fullScreen:{defaultValue:null,description:"Styles for CSS Selector `&:fullscreen`.",name:"_fullScreen",required:!1,type:{name:"SystemStyleObject | undefined"}},_selection:{defaultValue:null,description:"Styles for CSS Selector `&::selection`",name:"_selection",required:!1,type:{name:"SystemStyleObject | undefined"}},_rtl:{defaultValue:null,description:'Styles for CSS Selector `[dir=rtl] &`\nIt is applied when a parent element or this element has `dir="rtl"`',name:"_rtl",required:!1,type:{name:"SystemStyleObject | undefined"}},_ltr:{defaultValue:null,description:'Styles for CSS Selector `[dir=ltr] &`\nIt is applied when a parent element or this element has `dir="ltr"`',name:"_ltr",required:!1,type:{name:"SystemStyleObject | undefined"}},_mediaDark:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-color-scheme: dark)`\nIt is used when the user has requested the system use a light or dark color theme.",name:"_mediaDark",required:!1,type:{name:"SystemStyleObject | undefined"}},_mediaReduceMotion:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-reduced-motion: reduce)`\nIt is used when the user has requested the system to reduce the amount of animations.",name:"_mediaReduceMotion",required:!1,type:{name:"SystemStyleObject | undefined"}},_dark:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_dark",required:!1,type:{name:"SystemStyleObject | undefined"}},_light:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_light",required:!1,type:{name:"SystemStyleObject | undefined"}},_horizontal:{defaultValue:null,description:"Styles for the CSS Selector `&[data-orientation=horizontal]`",name:"_horizontal",required:!1,type:{name:"SystemStyleObject | undefined"}},_vertical:{defaultValue:null,description:"Styles for the CSS Selector `&[data-orientation=vertical]`",name:"_vertical",required:!1,type:{name:"SystemStyleObject | undefined"}}}}}catch{}const ut=({mode:r,isDisabled:e})=>{const{t}=Ae(),n=[{icon:Oi,title:t("auth.google")+t(`common.${r}`)},{icon:xi,title:t("auth.facebook")+t(`common.${r}`)},{icon:Ci,title:t("auth.github")+t(`common.${r}`)}];return g.jsx(ge,{justifyContent:"space-between",children:n.map(s=>g.jsx(Nt,{flex:"1",maxWidth:`${Math.floor(10/n.length)*10}%`,title:s.title,isDisabled:e,children:g.jsx(s.icon,{})},s.title))})};ut.defaultProps={mode:"login"};try{ut.displayName="OAuthOptions",ut.__docgenInfo={description:"",displayName:"OAuthOptions",props:{mode:{defaultValue:{value:"login"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"signup"'},{value:'"login"'}]}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean"}}}}}catch{}const bl={email:"",password:""},br=({onClose:r})=>{const{t:e}=Ae(),{register:t,handleSubmit:n,formState:s}=is({defaultValues:bl}),i=s.isSubmitting,a=o=>void n(l=>console.log(l))(o);return g.jsxs(g.Fragment,{children:[g.jsx(ut,{mode:"login",isDisabled:i}),g.jsxs("form",{onSubmit:a,role:"form",children:[g.jsxs(hr,{children:[g.jsx(fr,{children:e("auth.signup.email.label")}),g.jsx(pr,{...t("email"),type:"email",required:!0,placeholder:e("auth.login.email.placeholder")})]}),g.jsxs(hr,{children:[g.jsx(fr,{children:e("auth.signup.password.label")}),g.jsx(pr,{...t("password"),type:"password",required:!0,placeholder:e("auth.login.password.placeholder")})]}),g.jsx(Nt,{w:"100%",variant:"success",mt:"8",type:"submit",children:e("common.login")})]})]})};try{br.displayName="LoginForm",br.__docgenInfo={description:"",displayName:"LoginForm",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}const wl=jt.string().min(1,"formErrors.required").min(8,"formErrors.passwordTooShort").max(20,"formErrors.passwordTooLong").refine(r=>/[A-Z]/.test(r),"formErrors.needUppercase").refine(r=>/[a-z]/.test(r),"formErrors.needLowercase").refine(r=>/[0-9]/.test(r),"formErrors.needNumber").refine(r=>/[!@#$%^&*]/.test(r),"formErrors.needSpecialCharacter"),_l=jt.string().email("formErrors.invalidEmail").min(1,"formErrors.required"),Sl=jt.object({email:_l,password:wl,passwordValidation:jt.string().min(1,"formErrors.required")}).refine(r=>r.password===r.passwordValidation,{message:"formErrors.passwordsNotMatch",path:["passwordValidation"]});let nr=class extends Error{constructor(t,n){super(t);Ke(this,"status");Ke(this,"__isAuthError",!0);this.name="AuthError",this.status=n}};var Ol=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const xl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ol(void 0,void 0,void 0,function*(){return yield(yield Bt(()=>Promise.resolve().then(()=>Qt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Wr extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Cl extends Wr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class El extends Wr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pl extends Wr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tl=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};class kl{constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=xl(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Tl(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},l;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:l}).catch(f=>{throw new Cl(f)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new El(c);if(!c.ok)throw new Pl(c);let d=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return d==="application/json"?h=yield c.json():d==="application/octet-stream"?h=yield c.blob():d==="multipart/form-data"?h=yield c.formData():h=yield c.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var wr={exports:{}};(function(r,e){var t=typeof self<"u"?self:Mi,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(a){var o={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function l(p){return p&&DataView.prototype.isPrototypeOf(p)}if(o.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(p){return p&&c.indexOf(Object.prototype.toString.call(p))>-1};function d(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()}function h(p){return typeof p!="string"&&(p=String(p)),p}function f(p){var x={next:function(){var R=p.shift();return{done:R===void 0,value:R}}};return o.iterable&&(x[Symbol.iterator]=function(){return x}),x}function y(p){this.map={},p instanceof y?p.forEach(function(x,R){this.append(R,x)},this):Array.isArray(p)?p.forEach(function(x){this.append(x[0],x[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(x){this.append(x,p[x])},this)}y.prototype.append=function(p,x){p=d(p),x=h(x);var R=this.map[p];this.map[p]=R?R+", "+x:x},y.prototype.delete=function(p){delete this.map[d(p)]},y.prototype.get=function(p){return p=d(p),this.has(p)?this.map[p]:null},y.prototype.has=function(p){return this.map.hasOwnProperty(d(p))},y.prototype.set=function(p,x){this.map[d(p)]=h(x)},y.prototype.forEach=function(p,x){for(var R in this.map)this.map.hasOwnProperty(R)&&p.call(x,this.map[R],R,this)},y.prototype.keys=function(){var p=[];return this.forEach(function(x,R){p.push(R)}),f(p)},y.prototype.values=function(){var p=[];return this.forEach(function(x){p.push(x)}),f(p)},y.prototype.entries=function(){var p=[];return this.forEach(function(x,R){p.push([R,x])}),f(p)},o.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function v(p){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}function m(p){return new Promise(function(x,R){p.onload=function(){x(p.result)},p.onerror=function(){R(p.error)}})}function w(p){var x=new FileReader,R=m(x);return x.readAsArrayBuffer(p),R}function _(p){var x=new FileReader,R=m(x);return x.readAsText(p),R}function O(p){for(var x=new Uint8Array(p),R=new Array(x.length),C=0;C<x.length;C++)R[C]=String.fromCharCode(x[C]);return R.join("")}function S(p){if(p.slice)return p.slice(0);var x=new Uint8Array(p.byteLength);return x.set(new Uint8Array(p)),x.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(p){this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:o.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:o.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():o.arrayBuffer&&o.blob&&l(p)?(this._bodyArrayBuffer=S(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||u(p))?this._bodyArrayBuffer=S(p):this._bodyText=p=Object.prototype.toString.call(p):this._bodyText="",this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var p=v(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var p=v(this);if(p)return p;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(p){var x=p.toUpperCase();return P.indexOf(x)>-1?x:p}function E(p,x){x=x||{};var R=x.body;if(p instanceof E){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,x.headers||(this.headers=new y(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!R&&p._bodyInit!=null&&(R=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new y(x.headers)),this.method=T(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(R)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function A(p){var x=new FormData;return p.trim().split("&").forEach(function(R){if(R){var C=R.split("="),$=C.shift().replace(/\+/g," "),I=C.join("=").replace(/\+/g," ");x.append(decodeURIComponent($),decodeURIComponent(I))}}),x}function j(p){var x=new y,R=p.replace(/\r?\n[\t ]+/g," ");return R.split(/\r?\n/).forEach(function(C){var $=C.split(":"),I=$.shift().trim();if(I){var X=$.join(":").trim();x.append(I,X)}}),x}k.call(E.prototype);function M(p,x){x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in x?x.statusText:"OK",this.headers=new y(x.headers),this.url=x.url||"",this._initBody(p)}k.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},M.error=function(){var p=new M(null,{status:0,statusText:""});return p.type="error",p};var U=[301,302,303,307,308];M.redirect=function(p,x){if(U.indexOf(x)===-1)throw new RangeError("Invalid status code");return new M(null,{status:x,headers:{location:p}})},a.DOMException=i.DOMException;try{new a.DOMException}catch{a.DOMException=function(x,R){this.message=x,this.name=R;var C=Error(x);this.stack=C.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function L(p,x){return new Promise(function(R,C){var $=new E(p,x);if($.signal&&$.signal.aborted)return C(new a.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function X(){I.abort()}I.onload=function(){var ae={status:I.status,statusText:I.statusText,headers:j(I.getAllResponseHeaders()||"")};ae.url="responseURL"in I?I.responseURL:ae.headers.get("X-Request-URL");var oe="response"in I?I.response:I.responseText;R(new M(oe,ae))},I.onerror=function(){C(new TypeError("Network request failed"))},I.ontimeout=function(){C(new TypeError("Network request failed"))},I.onabort=function(){C(new a.DOMException("Aborted","AbortError"))},I.open($.method,$.url,!0),$.credentials==="include"?I.withCredentials=!0:$.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&o.blob&&(I.responseType="blob"),$.headers.forEach(function(ae,oe){I.setRequestHeader(oe,ae)}),$.signal&&($.signal.addEventListener("abort",X),I.onreadystatechange=function(){I.readyState===4&&$.signal.removeEventListener("abort",X)}),I.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return L.polyfill=!0,i.fetch||(i.fetch=L,i.Headers=y,i.Request=E,i.Response=M),a.Headers=y,a.Request=E,a.Response=M,a.fetch=L,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(wr,wr.exports);var Gr=wr.exports;const Jr=Ai(Gr),Qt=na({__proto__:null,default:Jr},[Gr]);class jl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Jr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let c=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const v=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");v&&m&&m.length>1&&(d=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,h=200,f="OK")}catch{i.status===404&&v===""?(h=204,f="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class Rl extends jl{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Fe extends Rl{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class Al{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Fe({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Fe({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Fe({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Fe({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Fe({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ml="1.8.0",Il={"X-Client-Info":`postgrest-js/${Ml}`};class Yr{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Il),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Al(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Yr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:s}={}){let i;const a=new URL(`${this.url}/rpc/${e}`);let o;n?(i="HEAD",Object.entries(t).forEach(([c,u])=>{a.searchParams.append(c,`${u}`)})):(i="POST",o=t);const l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new Fe({method:i,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}var sr,Tn;function Dl(){if(Tn)return sr;Tn=1;var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return sr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}(),sr}const $l="websocket",Fl="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ll=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],ql="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Ul=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Nl="1.0.34",Bl={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Vl="https://github.com/theturtle32/WebSocket-Node",Hl={node:">=4.0.0"},zl={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Ql={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Kl={verbose:!1},Wl={test:"tape test/unit/*.js",gulp:"gulp"},Gl="index",Jl={lib:"./lib"},Yl="lib/browser.js",Xl="Apache-2.0",Zl={name:$l,description:Fl,keywords:Ll,author:ql,contributors:Ul,version:Nl,repository:Bl,homepage:Vl,engines:Hl,dependencies:zl,devDependencies:Ql,config:Kl,scripts:Wl,main:Gl,directories:Jl,browser:Yl,license:Xl};var eu=Zl.version,xe;if(typeof globalThis=="object")xe=globalThis;else try{xe=Dl()}catch{}finally{if(!xe&&typeof window<"u"&&(xe=window),!xe)throw new Error("Could not determine global this")}var ct=xe.WebSocket||xe.MozWebSocket,tu=eu;function qs(r,e){var t;return e?t=new ct(r,e):t=new ct(r),t}ct&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(qs,r,{get:function(){return ct[r]}})});var ru={w3cwebsocket:ct?qs:null,version:tu};const nu="2.7.3",su={"X-Client-Info":`realtime-js/${nu}`},iu="1.0.0",Us=1e4,au=1e3;var nt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(nt||(nt={}));var W;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(W||(W={}));var le;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(le||(le={}));var _r;(function(r){r.websocket="websocket"})(_r||(_r={}));var Ce;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ce||(Ce={}));class Ns{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ou{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+s));a=a+s;const l=n.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class ir{constructor(e,t,n={},s=Us){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var kn;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(kn||(kn={}));class st{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=st.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=st.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=st.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const d=i[c];if(d){const h=u.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),y=u.filter(m=>f.indexOf(m.presence_ref)<0),v=d.filter(m=>h.indexOf(m.presence_ref)<0);y.length>0&&(o[c]=y),v.length>0&&(l[c]=v)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[o].unshift(...h)}n(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(q||(q={}));const jn=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=lu(a,r,e,s),i),{})},lu=(r,e,t,n)=>{const s=e.find(o=>o.name===r),i=s==null?void 0:s.type,a=t[r];return i&&!n.includes(i)?Bs(i,a):Sr(a)},Bs=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return hu(e,t)}switch(r){case q.bool:return uu(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return cu(e);case q.json:case q.jsonb:return du(e);case q.timestamp:return fu(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return Sr(e);default:return Sr(e)}},Sr=r=>r,uu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},cu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},du=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},hu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Bs(e,o))}return r},fu=r=>typeof r=="string"?r.replace(" ","T"):r;var Rn=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})},An;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(An||(An={}));var Mn;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(Mn||(Mn={}));var In;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(In||(In={}));class Xr{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=W.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new ir(this,le.join,this.params,this.timeout),this.rejoinTimer=new Ns(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=W.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=W.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=W.errored,this.rejoinTimer.scheduleTimeout())}),this._on(le.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new st(this)}subscribe(e,t=this.timeout){var n,s;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,f=[];for(let y=0;y<h;y++){const v=d[y],{filter:{event:m,schema:w,table:_,filter:O}}=v,S=c&&c[y];if(S&&S.event===m&&S.schema===w&&S.table===_&&S.filter===O)f.push(Object.assign(Object.assign({},v),{id:S.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return Rn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return Rn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,n){return this._on(e,t,n)}send(e,t={}){return new Promise(n=>{var s,i,a;const o=this._push(e.type,e,t.timeout||this.timeout);o.rateLimited&&n("rate limited"),e.type==="broadcast"&&!(!((a=(i=(s=this.params)===null||s===void 0?void 0:s.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.ack)&&n("ok"),o.receive("ok",()=>n("ok")),o.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=W.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(le.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new ir(this,le.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ir(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=le;if(n&&[o,l,c,u].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,t,n);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var y,v,m;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((m=(v=f.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===a}).map(f=>f.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var y,v,m,w,_,O;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const S=f.id,k=(y=f.filter)===null||y===void 0?void 0:y.event;return S&&((v=t.ids)===null||v===void 0?void 0:v.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const S=(_=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return S==="*"||S===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:v,table:m,commit_timestamp:w,type:_,errors:O}=y;h=Object.assign(Object.assign({},{schema:v,table:m,commit_timestamp:w,eventType:_,new:{},old:{},errors:O}),this._getPayloadRecords(y))}f.callback(h,n)})}_isClosed(){return this.state===W.closed}_isJoined(){return this.state===W.joined}_isJoining(){return this.state===W.joining}_isLeaving(){return this.state===W.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Xr.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(le.close,{},e)}_onError(e){this._on(le.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=W.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=jn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=jn(e.columns,e.old_record)),t}}var ar=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const pu=()=>{};class mu{constructor(e,t){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=su,this.params={},this.timeout=Us,this.transport=ru.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=pu,this.conn=null,this.sendBuffer=[],this.serializer=new ou,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${_r.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ns(()=>ar(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return ar(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return ar(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nt.connecting:return Ce.Connecting;case nt.open:return Ce.Open;case nt.closing:return Ce.Closing;default:return Ce.Closed}}isConnected(){return this.connectionState()===Ce.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const n=new Xr(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e;let a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};if(this.log("push",`${t} ${n} (${i})`,s),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(a)())return"rate limited"}else a();else this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(le.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iu}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:a}=t;(a&&a===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(le.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(au,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Zr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function H(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class yu extends Zr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Dn extends Zr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Vs=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Hs=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Vs(void 0,void 0,void 0,function*(){return yield(yield Bt(()=>Promise.resolve().then(()=>Qt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},vu=()=>Vs(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bt(()=>Promise.resolve().then(()=>Qt),void 0,import.meta.url)).Response:Response});var He=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const or=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),gu=(r,e)=>He(void 0,void 0,void 0,function*(){const t=yield vu();r instanceof t?r.json().then(n=>{e(new yu(or(n),r.status||500))}).catch(n=>{e(new Dn(or(n),n))}):e(new Dn(or(r),r))}),bu=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};function Kt(r,e,t,n,s,i){return He(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,bu(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>gu(l,o))})})}function Or(r,e,t,n){return He(this,void 0,void 0,function*(){return Kt(r,"GET",e,t,n)})}function me(r,e,t,n,s){return He(this,void 0,void 0,function*(){return Kt(r,"POST",e,n,s,t)})}function wu(r,e,t,n,s){return He(this,void 0,void 0,function*(){return Kt(r,"PUT",e,n,s,t)})}function zs(r,e,t,n,s){return He(this,void 0,void 0,function*(){return Kt(r,"DELETE",e,n,s,t)})}var Z=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const _u={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$n={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Su{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Hs(s)}uploadOrUpdate(e,t,n,s){return Z(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},$n),s),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl)):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return u.ok?{data:{path:l},error:null}:{data:null,error:yield u.json()}}catch(i){if(H(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Z(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:$n.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u});return d.ok?{data:{path:i},error:null}:{data:null,error:yield d.json()}}catch(l){if(H(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Z(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const n=yield me(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),i=s.searchParams.get("token");if(!i)throw new Zr("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}update(e,t,n){return Z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return Z(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}copy(e,t){return Z(this,void 0,void 0,function*(){try{return{data:{path:(yield me(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,n){return Z(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield me(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Z(this,void 0,void 0,function*(){try{const s=yield me(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}download(e,t){return Z(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Or(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(H(o))return{data:null,error:o};throw o}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(e){return Z(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}list(e,t,n){return Z(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},_u),t),{prefix:e||""});return{data:yield me(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ou="2.5.1",xu={"X-Client-Info":`storage-js/${Ou}`};var De=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};class Cu{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},xu),t),this.fetch=Hs(n)}listBuckets(){return De(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(H(e))return{data:null,error:e};throw e}})}getBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return De(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return De(this,void 0,void 0,function*(){try{return{data:yield wu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}emptyBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}deleteBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}}class Eu extends Cu{constructor(e,t={},n){super(e,t,n)}from(e){return new Su(this.url,this.headers,e,this.fetch)}}const Pu="2.32.0",Tu={"X-Client-Info":`supabase-js/${Pu}`};var ku=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const ju=r=>{let e;return r?e=r:typeof fetch>"u"?e=Jr:e=fetch,(...t)=>e(...t)},Ru=()=>typeof Headers>"u"?Gr.Headers:Headers,Au=(r,e,t)=>{const n=ju(t),s=Ru();return(i,a)=>ku(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:r;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:c}))})};function Mu(r){return r.replace(/\/$/,"")}function Iu(r,e){const{db:t,auth:n,realtime:s,global:i}=r,{db:a,auth:o,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}function Du(r){return Math.round(Date.now()/1e3)+r}function $u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const he=()=>typeof document<"u",Se={tested:!1,writable:!1},it=()=>{if(!he())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Se.tested)return Se.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Se.tested=!0,Se.writable=!0}catch{Se.tested=!0,Se.writable=!1}return Se.writable};function lr(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const Qs=r=>{let e;return r?e=r:typeof fetch>"u"?e=async(...t)=>await(await Bt(()=>Promise.resolve().then(()=>Qt),void 0,import.meta.url)).fetch(...t):e=fetch,(...t)=>e(...t)},Fu=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Je=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},wt=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ur=async(r,e)=>{await r.removeItem(e)};function Lu(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,i,a,o,l,c,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)a=e.indexOf(r.charAt(u++)),o=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),n=a<<2|o>>4,s=(o&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(n),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Wt{constructor(){this.promise=new Wt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Wt.promiseConstructor=Promise;function Fn(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(Lu(n))}async function qu(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Uu(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function Nu(r){return("0"+r.toString(16)).substr(-2)}function _t(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Nu).join("")}async function Bu(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function Vu(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function St(r){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const e=await Bu(r);return Vu(e)}class en extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function D(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Hu extends en{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function zu(r){return D(r)&&r.name==="AuthApiError"}class Ks extends en{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ze extends en{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class $e extends ze{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class cr extends ze{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Ot extends ze{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class xt extends ze{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ln extends ze{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xr extends ze{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function qn(r){return D(r)&&r.name==="AuthRetryableFetchError"}var Qu=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const Xe=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ku=[502,503,504];async function Un(r){if(!Fu(r))throw new xr(Xe(r),0);if(Ku.includes(r.status))throw new xr(Xe(r),r.status);let e;try{e=await r.json()}catch(t){throw new Ks(Xe(t),t)}throw new Hu(Xe(e),r.status||500)}const Wu=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function F(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Gu(r,e,t+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Gu(r,e,t,n,s,i){const a=Wu(e,n,s,i);let o;try{o=await r(t,a)}catch(l){throw console.error(l),new xr(Xe(l),0)}if(o.ok||await Un(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Un(l)}}function pe(r){var e;let t=null;Zu(r)&&(t=Object.assign({},r),t.expires_at=Du(r.expires_in));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function ve(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Ju(r){return{data:r,error:null}}function Yu(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,a=Qu(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Xu(r){return r}function Zu(r){return r.access_token&&r.refresh_token&&r.expires_in}var ec=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class tc{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Qs(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ve})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ec(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Yu,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(D(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ve})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xu});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(y.split(";")[1].split("=")[1]);c[`${m}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(D(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ve})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ve})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ve})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}}const Ws="2.47.0",rc="http://localhost:9999",nc="supabase.auth.token",sc={"X-Client-Info":`gotrue-js/${Ws}`},Nn=10,Bn={getItem:r=>it()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{it()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{it()&&globalThis.localStorage.removeItem(r)}};function ic(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}ic();const ac={url:rc,storageKey:nc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sc,flowType:"implicit",debug:!1},Ct=30*1e3,Vn=3;async function oc(r,e,t){return await t()}class dt{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.instanceID=dt.nextInstanceID,dt.nextInstanceID+=1,this.instanceID>0&&he()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},ac),e);if(this.logDebugMessages=n.debug,this.inMemorySession=null,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.persistSession=n.persistSession,this.storage=n.storage||Bn,this.admin=new tc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Qs(n.fetch),this.lock=n.lock||oc,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Bn&&!it()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),he()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} (${Ws}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=he()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return D(e)?{error:e}:{error:new Ks("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,s;try{await this._removeSession();let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,y=null;if(this.flowType==="pkce"){const v=_t();await Je(this.storage,`${this.storageKey}-code-verifier`,v),f=await St(v),y=v===f?"plain":"s256"}i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:y},xform:pe})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:pe})}else throw new Ot("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pe})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pe})}else throw new Ot("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new cr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:s})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await wt(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:s}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:pe});return await ur(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new cr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:s})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:s,access_token:i,nonce:a}=e,o=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:pe}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new cr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const h=_t();await Je(this.storage,`${this.storageKey}-code-verifier`,h),c=await St(h),u=h===c?"plain":"s256"}const{error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ot("You must provide either an email or phone number.")}catch(o){if(D(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:pe});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{return await this._removeSession(),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Ju})}catch(i){if(D(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new $e;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(D(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await F(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await F(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Ot("You must provide either an email or phone number and a type")}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;if(this.persistSession){const i=await wt(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ve}):await this._useSession(async t=>{var n,s;const{data:i,error:a}=t;if(a)throw a;return await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0,xform:ve})})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new $e;const a=s.session,{data:o,error:l}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:a.access_token,xform:ve});if(l)throw l;return a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Fn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $e;const t=Date.now()/1e3;let n=t,s=!0,i=null;const a=Fn(e.access_token);if(a.exp&&(n=a.exp,s=n<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(D(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new $e;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!he())throw new xt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new xt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ln("Not a valid PKCE flow url.");const t=lr(window.location.href);if(e){if(!t.code)throw new Ln("No code detected.");const{data:v,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:v.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new xt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,token_type:l}=t;if(!i||!o||!a||!l)throw new xt("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(o),d=c+u,{data:h,error:f}=await this._getUser(i);if(f)throw f;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:u,expires_at:d,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(t){if(D(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=lr(window.location.href);return!!(he()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=lr(window.location.href),t=await wt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(zu(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await ur(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=$u(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;if(this.flowType==="pkce"){const i=_t();await Je(this.storage,`${this.storageKey}-code-verifier`,i),n=await St(i),s=i===n?"plain":"s256"}try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(D(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Uu(async s=>(await qu(s*200),this._debug(t,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pe})),(s,i,a)=>a&&a.error&&qn(a.error)&&Date.now()+(s+1)*200-n<Ct)}catch(n){if(this._debug(t,"error",n),D(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),he()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await wt(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+Nn;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Nn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),qn(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new $e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wt;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new $e;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),D(i)){const a={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Je(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await ur(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&he()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ct);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ct);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ct}ms, refresh threshold is ${Vn} ticks`),s<=Vn&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!he()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?setTimeout(async()=>{e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()},0):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=_t();await Je(this.storage,`${this.storageKey}-code-verifier`,s);const i=await St(s),a=s===i?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",i,"method",a);const o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);n.push(s.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:l}=await F(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(!((s=o==null?void 0:o.totp)===null||s===void 0)&&s.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this._getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:n,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}})}}dt.nextInstanceID=0;globalThis&&it()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class lc extends dt{constructor(e){super(e)}}var uc=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(d){a(d)}}function l(u){try{c(n.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const cc={headers:Tu},dc={schema:"public"},hc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fc={};class pc{constructor(e,t,n){var s,i,a,o,l,c,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=Mu(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:dc,realtime:fc,auth:Object.assign(Object.assign({},hc),{storageKey:f}),global:cc},v=Iu(n??{},y);this.storageKey=(i=(s=v.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=(a=v.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=Au(t,this._getAccessToken.bind(this),(u=v.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new Yr(`${h}/rest/v1`,{headers:this.headers,schema:(d=v.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new kl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Eu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uc(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,debug:o},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lc({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:a,debug:o,fetch:c})}_initRealtimeClient(e){return new mu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mc=(r,e,t)=>new pc(r,e,t),Dt=mc({STORYBOOK_MODE:"PRODUCTION",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"}.VITE_SUPABASE_URL,{STORYBOOK_MODE:"PRODUCTION",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"}.VITE_SUPABASE_KEY,{global:{fetch:(...r)=>fetch(...r)}});class vt{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const ht=typeof window>"u"||"Deno"in window;function ee(){}function yc(r,e){return typeof r=="function"?r(e):r}function Cr(r){return typeof r=="number"&&r>=0&&r!==1/0}function Gs(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Ze(r,e,t){return Gt(r)?typeof e=="function"?{...t,queryKey:r,queryFn:e}:{...e,queryKey:r}:r}function ye(r,e,t){return Gt(r)?[{...e,queryKey:r},t]:[r||{},e]}function Hn(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:o}=r;if(Gt(a)){if(n){if(e.queryHash!==tn(a,e.options))return!1}else if(!$t(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||typeof s<"u"&&s!==e.state.fetchStatus||i&&!i(e))}function zn(r,e){const{exact:t,fetching:n,predicate:s,mutationKey:i}=r;if(Gt(i)){if(!e.options.mutationKey)return!1;if(t){if(Pe(e.options.mutationKey)!==Pe(i))return!1}else if(!$t(e.options.mutationKey,i))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||s&&!s(e))}function tn(r,e){return((e==null?void 0:e.queryKeyHashFn)||Pe)(r)}function Pe(r){return JSON.stringify(r,(e,t)=>Pr(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function $t(r,e){return Js(r,e)}function Js(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Js(r[t],e[t])):!1}function Ys(r,e){if(r===e)return r;const t=Qn(r)&&Qn(e);if(t||Pr(r)&&Pr(e)){const n=t?r.length:Object.keys(r).length,s=t?e:Object.keys(e),i=s.length,a=t?[]:{};let o=0;for(let l=0;l<i;l++){const c=t?l:s[l];a[c]=Ys(r[c],e[c]),a[c]===r[c]&&o++}return n===i&&o===n?r:a}return e}function Er(r,e){if(r&&!e||e&&!r)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Qn(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Pr(r){if(!Kn(r))return!1;const e=r.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Kn(t)||!t.hasOwnProperty("isPrototypeOf"))}function Kn(r){return Object.prototype.toString.call(r)==="[object Object]"}function Gt(r){return Array.isArray(r)}function Xs(r){return new Promise(e=>{setTimeout(e,r)})}function Wn(r){Xs(0).then(r)}function vc(){if(typeof AbortController=="function")return new AbortController}function Tr(r,e,t){return t.isDataEqual!=null&&t.isDataEqual(r,e)?r:typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Ys(r,e):e}class gc extends vt{constructor(){super(),this.setup=e=>{if(!ht&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Ft=new gc,Gn=["online","offline"];class bc extends vt{constructor(){super(),this.setup=e=>{if(!ht&&window.addEventListener){const t=()=>e();return Gn.forEach(n=>{window.addEventListener(n,t,!1)}),()=>{Gn.forEach(n=>{window.removeEventListener(n,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Lt=new bc;function wc(r){return Math.min(1e3*2**r,3e4)}function Jt(r){return(r??"online")==="online"?Lt.isOnline():!0}class Zs{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function kt(r){return r instanceof Zs}function ei(r){let e=!1,t=0,n=!1,s,i,a;const o=new Promise((m,w)=>{i=m,a=w}),l=m=>{n||(f(new Zs(m)),r.abort==null||r.abort())},c=()=>{e=!0},u=()=>{e=!1},d=()=>!Ft.isFocused()||r.networkMode!=="always"&&!Lt.isOnline(),h=m=>{n||(n=!0,r.onSuccess==null||r.onSuccess(m),s==null||s(),i(m))},f=m=>{n||(n=!0,r.onError==null||r.onError(m),s==null||s(),a(m))},y=()=>new Promise(m=>{s=w=>{const _=n||!d();return _&&m(w),_},r.onPause==null||r.onPause()}).then(()=>{s=void 0,n||r.onContinue==null||r.onContinue()}),v=()=>{if(n)return;let m;try{m=r.fn()}catch(w){m=Promise.reject(w)}Promise.resolve(m).then(h).catch(w=>{var _,O;if(n)return;const S=(_=r.retry)!=null?_:3,k=(O=r.retryDelay)!=null?O:wc,P=typeof k=="function"?k(t,w):k,T=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,w);if(e||!T){f(w);return}t++,r.onFail==null||r.onFail(t,w),Xs(P).then(()=>{if(d())return y()}).then(()=>{e?f(w):v()})})};return Jt(r.networkMode)?v():y().then(v),{promise:o,cancel:l,continue:()=>(s==null?void 0:s())?o:Promise.resolve(),cancelRetry:c,continueRetry:u}}const rn=console;function _c(){let r=[],e=0,t=u=>{u()},n=u=>{u()};const s=u=>{let d;e++;try{d=u()}finally{e--,e||o()}return d},i=u=>{e?r.push(u):Wn(()=>{t(u)})},a=u=>(...d)=>{i(()=>{u(...d)})},o=()=>{const u=r;r=[],u.length&&Wn(()=>{n(()=>{u.forEach(d=>{t(d)})})})};return{batch:s,batchCalls:a,schedule:i,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{n=u}}}const N=_c();class ti{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cr(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(ht?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Sc extends ti{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||rn,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||Oc(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,t){const n=Tr(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const n=this.promise;return(t=this.retryer)==null||t.cancel(e),n?n.then(ee).catch(ee):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Gs(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(y=>y.options.queryFn);f&&this.setOptions(f.options)}Array.isArray(this.options.queryKey);const a=vc(),o={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};l(o);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(o)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),u={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(l(u),(n=this.options.behavior)==null||n.onFetch(u),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=u.fetchOptions)==null?void 0:s.meta)){var d;this.dispatch({type:"fetch",meta:(d=u.fetchOptions)==null?void 0:d.meta})}const h=f=>{if(kt(f)&&f.silent||this.dispatch({type:"error",error:f}),!kt(f)){var y,v,m,w;(y=(v=this.cache.config).onError)==null||y.call(v,f,this),(m=(w=this.cache.config).onSettled)==null||m.call(w,this.state.data,f,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=ei({fn:u.fetchFn,abort:a==null?void 0:a.abort.bind(a),onSuccess:f=>{var y,v,m,w;if(typeof f>"u"){h(new Error(this.queryHash+" data is undefined"));return}this.setData(f),(y=(v=this.cache.config).onSuccess)==null||y.call(v,f,this),(m=(w=this.cache.config).onSettled)==null||m.call(w,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:h,onFail:(f,y)=>{this.dispatch({type:"failed",failureCount:f,error:y})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const t=n=>{var s,i;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:Jt(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return kt(a)&&a.revert&&this.revertState?{...this.revertState}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),N.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function Oc(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=typeof e<"u",n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class ri extends vt{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,n){var s;const i=t.queryKey,a=(s=t.queryHash)!=null?s:tn(i,t);let o=this.get(a);return o||(o=new Sc({cache:this,logger:e.getLogger(),queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){N.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[n]=ye(e,t);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(s=>Hn(n,s))}findAll(e,t){const[n]=ye(e,t);return Object.keys(n).length>0?this.queries.filter(s=>Hn(n,s)):this.queries}notify(e){N.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){N.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){N.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class xc extends ti{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||rn,this.observers=[],this.state=e.state||Cc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return(e=(t=this.retryer)==null?void 0:t.continue())!=null?e:this.execute()}async execute(){const e=()=>{var T;return this.retryer=ei({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(E,A)=>{this.dispatch({type:"failed",failureCount:E,error:A})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(T=this.options.retry)!=null?T:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var n,s,i,a,o,l,c,u;if(!t){var d,h,f,y;this.dispatch({type:"loading",variables:this.options.variables}),await((d=(h=this.mutationCache.config).onMutate)==null?void 0:d.call(h,this.state.variables,this));const E=await((f=(y=this.options).onMutate)==null?void 0:f.call(y,this.state.variables));E!==this.state.context&&this.dispatch({type:"loading",context:E,variables:this.state.variables})}const T=await e();return await((n=(s=this.mutationCache.config).onSuccess)==null?void 0:n.call(s,T,this.state.variables,this.state.context,this)),await((i=(a=this.options).onSuccess)==null?void 0:i.call(a,T,this.state.variables,this.state.context)),await((o=(l=this.mutationCache.config).onSettled)==null?void 0:o.call(l,T,null,this.state.variables,this.state.context,this)),await((c=(u=this.options).onSettled)==null?void 0:c.call(u,T,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:T}),T}catch(T){try{var v,m,w,_,O,S,k,P;throw await((v=(m=this.mutationCache.config).onError)==null?void 0:v.call(m,T,this.state.variables,this.state.context,this)),await((w=(_=this.options).onError)==null?void 0:w.call(_,T,this.state.variables,this.state.context)),await((O=(S=this.mutationCache.config).onSettled)==null?void 0:O.call(S,void 0,T,this.state.variables,this.state.context,this)),await((k=(P=this.options).onSettled)==null?void 0:k.call(P,void 0,T,this.state.variables,this.state.context)),T}finally{this.dispatch({type:"error",error:T})}}}dispatch(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Jt(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}};this.state=t(this.state),N.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Cc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Ec extends vt{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,n){const s=new xc({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){N.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(t=>zn(e,t))}findAll(e){return this.mutations.filter(t=>zn(e,t))}notify(e){N.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const t=this.mutations.filter(n=>n.state.isPaused);return N.batch(()=>t.reduce((n,s)=>n.then(()=>s.continue().catch(ee)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function kr(){return{onFetch:r=>{r.fetchFn=()=>{var e,t,n,s,i,a;const o=(e=r.fetchOptions)==null||(t=e.meta)==null?void 0:t.refetchPage,l=(n=r.fetchOptions)==null||(s=n.meta)==null?void 0:s.fetchMore,c=l==null?void 0:l.pageParam,u=(l==null?void 0:l.direction)==="forward",d=(l==null?void 0:l.direction)==="backward",h=((i=r.state.data)==null?void 0:i.pages)||[],f=((a=r.state.data)==null?void 0:a.pageParams)||[];let y=f,v=!1;const m=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>{var T;if((T=r.signal)!=null&&T.aborted)v=!0;else{var E;(E=r.signal)==null||E.addEventListener("abort",()=>{v=!0})}return r.signal}})},w=r.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+r.options.queryHash+"'")),_=(P,T,E,A)=>(y=A?[T,...y]:[...y,T],A?[E,...P]:[...P,E]),O=(P,T,E,A)=>{if(v)return Promise.reject("Cancelled");if(typeof E>"u"&&!T&&P.length)return Promise.resolve(P);const j={queryKey:r.queryKey,pageParam:E,meta:r.options.meta};m(j);const M=w(j);return Promise.resolve(M).then(L=>_(P,E,L,A))};let S;if(!h.length)S=O([]);else if(u){const P=typeof c<"u",T=P?c:jr(r.options,h);S=O(h,P,T)}else if(d){const P=typeof c<"u",T=P?c:ni(r.options,h);S=O(h,P,T,!0)}else{y=[];const P=typeof r.options.getNextPageParam>"u";S=(o&&h[0]?o(h[0],0,h):!0)?O([],P,f[0]):Promise.resolve(_([],f[0],h[0]));for(let E=1;E<h.length;E++)S=S.then(A=>{if(o&&h[E]?o(h[E],E,h):!0){const M=P?f[E]:jr(r.options,A);return O(A,P,M)}return Promise.resolve(_(A,f[E],h[E]))})}return S.then(P=>({pages:P,pageParams:y}))}}}}function jr(r,e){return r.getNextPageParam==null?void 0:r.getNextPageParam(e[e.length-1],e)}function ni(r,e){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(e[0],e)}function Pc(r,e){if(r.getNextPageParam&&Array.isArray(e)){const t=jr(r,e);return typeof t<"u"&&t!==null&&t!==!1}}function Tc(r,e){if(r.getPreviousPageParam&&Array.isArray(e)){const t=ni(r,e);return typeof t<"u"&&t!==null&&t!==!1}}class kc{constructor(e={}){this.queryCache=e.queryCache||new ri,this.mutationCache=e.mutationCache||new Ec,this.logger=e.logger||rn,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Ft.subscribe(()=>{Ft.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Lt.subscribe(()=>{Lt.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[n]=ye(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return(n=this.queryCache.find(e,t))==null?void 0:n.state.data}ensureQueryData(e,t,n){const s=Ze(e,t,n),i=this.getQueryData(s.queryKey);return i?Promise.resolve(i):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.queryCache.find(e),i=s==null?void 0:s.state.data,a=yc(t,i);if(typeof a>"u")return;const o=Ze(e),l=this.defaultQueryOptions(o);return this.queryCache.build(this,l).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return N.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e,t){var n;return(n=this.queryCache.find(e,t))==null?void 0:n.state}removeQueries(e,t){const[n]=ye(e,t),s=this.queryCache;N.batch(()=>{s.findAll(n).forEach(i=>{s.remove(i)})})}resetQueries(e,t,n){const[s,i]=ye(e,t,n),a=this.queryCache,o={type:"active",...s};return N.batch(()=>(a.findAll(s).forEach(l=>{l.reset()}),this.refetchQueries(o,i)))}cancelQueries(e,t,n){const[s,i={}]=ye(e,t,n);typeof i.revert>"u"&&(i.revert=!0);const a=N.batch(()=>this.queryCache.findAll(s).map(o=>o.cancel(i)));return Promise.all(a).then(ee).catch(ee)}invalidateQueries(e,t,n){const[s,i]=ye(e,t,n);return N.batch(()=>{var a,o;if(this.queryCache.findAll(s).forEach(c=>{c.invalidate()}),s.refetchType==="none")return Promise.resolve();const l={...s,type:(a=(o=s.refetchType)!=null?o:s.type)!=null?a:"active"};return this.refetchQueries(l,i)})}refetchQueries(e,t,n){const[s,i]=ye(e,t,n),a=N.batch(()=>this.queryCache.findAll(s).filter(l=>!l.isDisabled()).map(l=>{var c;return l.fetch(void 0,{...i,cancelRefetch:(c=i==null?void 0:i.cancelRefetch)!=null?c:!0,meta:{refetchPage:s.refetchPage}})}));let o=Promise.all(a).then(ee);return i!=null&&i.throwOnError||(o=o.catch(ee)),o}fetchQuery(e,t,n){const s=Ze(e,t,n),i=this.defaultQueryOptions(s);typeof i.retry>"u"&&(i.retry=!1);const a=this.queryCache.build(this,i);return a.isStaleByTime(i.staleTime)?a.fetch(i):Promise.resolve(a.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(ee).catch(ee)}fetchInfiniteQuery(e,t,n){const s=Ze(e,t,n);return s.behavior=kr(),this.fetchQuery(s)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(ee).catch(ee)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const n=this.queryDefaults.find(s=>Pe(e)===Pe(s.queryKey));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(n=>$t(e,n.queryKey));return t==null?void 0:t.defaultOptions}setMutationDefaults(e,t){const n=this.mutationDefaults.find(s=>Pe(e)===Pe(s.mutationKey));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(n=>$t(e,n.mutationKey));return t==null?void 0:t.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=tn(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class jc extends vt{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Jn(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rr(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rr(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const n=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Er(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const i=this.hasListeners();i&&Yn(this.currentQuery,s,this.options,n)&&this.executeFetch(),this.updateResult(t),i&&(this.currentQuery!==s||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();i&&(this.currentQuery!==s||this.options.enabled!==n.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),n=this.createResult(t,e);return Ac(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ee)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),ht||this.currentResult.isStale||!Cr(this.options.staleTime))return;const t=Gs(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(ht||this.options.enabled===!1||!Cr(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Ft.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const n=this.currentQuery,s=this.options,i=this.currentResult,a=this.currentResultState,o=this.currentResultOptions,l=e!==n,c=l?e.state:this.currentQueryInitialState,u=l?this.currentResult:this.previousQueryResult,{state:d}=e;let{dataUpdatedAt:h,error:f,errorUpdatedAt:y,fetchStatus:v,status:m}=d,w=!1,_=!1,O;if(t._optimisticResults){const E=this.hasListeners(),A=!E&&Jn(e,t),j=E&&Yn(e,n,t,s);(A||j)&&(v=Jt(e.options.networkMode)?"fetching":"paused",h||(m="loading")),t._optimisticResults==="isRestoring"&&(v="idle")}if(t.keepPreviousData&&!d.dataUpdatedAt&&u!=null&&u.isSuccess&&m!=="error")O=u.data,h=u.dataUpdatedAt,m=u.status,w=!0;else if(t.select&&typeof d.data<"u")if(i&&d.data===(a==null?void 0:a.data)&&t.select===this.selectFn)O=this.selectResult;else try{this.selectFn=t.select,O=t.select(d.data),O=Tr(i==null?void 0:i.data,O,t),this.selectResult=O,this.selectError=null}catch(E){this.selectError=E}else O=d.data;if(typeof t.placeholderData<"u"&&typeof O>"u"&&m==="loading"){let E;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))E=i.data;else if(E=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof E<"u")try{E=t.select(E),this.selectError=null}catch(A){this.selectError=A}typeof E<"u"&&(m="success",O=Tr(i==null?void 0:i.data,E,t),_=!0)}this.selectError&&(f=this.selectError,O=this.selectResult,y=Date.now(),m="error");const S=v==="fetching",k=m==="loading",P=m==="error";return{status:m,fetchStatus:v,isLoading:k,isSuccess:m==="success",isError:P,isInitialLoading:k&&S,data:O,dataUpdatedAt:h,error:f,errorUpdatedAt:y,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!k,isLoadingError:P&&d.dataUpdatedAt===0,isPaused:v==="paused",isPlaceholderData:_,isPreviousData:w,isRefetchError:P&&d.dataUpdatedAt!==0,isStale:nn(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Er(n,t))return;this.currentResult=n;const s={cache:!0},i=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!this.trackedProps.size)return!0;const l=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&l.add("error"),Object.keys(this.currentResult).some(c=>{const u=c;return this.currentResult[u]!==t[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!kt(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){N.batch(()=>{if(e.onSuccess){var t,n,s,i;(t=(n=this.options).onSuccess)==null||t.call(n,this.currentResult.data),(s=(i=this.options).onSettled)==null||s.call(i,this.currentResult.data,null)}else if(e.onError){var a,o,l,c;(a=(o=this.options).onError)==null||a.call(o,this.currentResult.error),(l=(c=this.options).onSettled)==null||l.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:u})=>{u(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Rc(r,e){return e.enabled!==!1&&!r.state.dataUpdatedAt&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Jn(r,e){return Rc(r,e)||r.state.dataUpdatedAt>0&&Rr(r,e,e.refetchOnMount)}function Rr(r,e,t){if(e.enabled!==!1){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&nn(r,e)}return!1}function Yn(r,e,t,n){return t.enabled!==!1&&(r!==e||n.enabled===!1)&&(!t.suspense||r.state.status!=="error")&&nn(r,t)}function nn(r,e){return r.isStaleByTime(e.staleTime)}function Ac(r,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!Er(r.getCurrentResult(),e)}class Mc extends jc{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:kr()},t)}getOptimisticResult(e){return e.behavior=kr(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,s,i,a,o,l;const{state:c}=e,u=super.createResult(e,t),{isFetching:d,isRefetching:h}=u,f=d&&((n=c.fetchMeta)==null||(s=n.fetchMore)==null?void 0:s.direction)==="forward",y=d&&((i=c.fetchMeta)==null||(a=i.fetchMore)==null?void 0:a.direction)==="backward";return{...u,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Pc(t,(o=c.data)==null?void 0:o.pages),hasPreviousPage:Tc(t,(l=c.data)==null?void 0:l.pages),isFetchingNextPage:f,isFetchingPreviousPage:y,isRefetching:h&&!f&&!y}}}var si={exports:{}},ii={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be=b;function Ic(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Dc=typeof Object.is=="function"?Object.is:Ic,$c=Be.useState,Fc=Be.useEffect,Lc=Be.useLayoutEffect,qc=Be.useDebugValue;function Uc(r,e){var t=e(),n=$c({inst:{value:t,getSnapshot:e}}),s=n[0].inst,i=n[1];return Lc(function(){s.value=t,s.getSnapshot=e,dr(s)&&i({inst:s})},[r,t,e]),Fc(function(){return dr(s)&&i({inst:s}),r(function(){dr(s)&&i({inst:s})})},[r]),qc(t),t}function dr(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Dc(r,t)}catch{return!0}}function Nc(r,e){return e()}var Bc=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Nc:Uc;ii.useSyncExternalStore=Be.useSyncExternalStore!==void 0?Be.useSyncExternalStore:Bc;si.exports=ii;var Vc=si.exports;const Hc=Vc.useSyncExternalStore,Xn=b.createContext(void 0),zc=b.createContext(!1);function Qc(r,e){return r||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Xn),window.ReactQueryClientContext):Xn)}const Kc=({context:r}={})=>{const e=b.useContext(Qc(r,b.useContext(zc)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ai=b.createContext(!1),Wc=()=>b.useContext(ai);ai.Provider;function Gc(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}const Jc=b.createContext(Gc()),Yc=()=>b.useContext(Jc);function Xc(r,e){return typeof r=="function"?r(...e):!!r}const Zc=(r,e)=>{(r.suspense||r.useErrorBoundary)&&(e.isReset()||(r.retryOnMount=!1))},ed=r=>{b.useEffect(()=>{r.clearReset()},[r])},td=({result:r,errorResetBoundary:e,useErrorBoundary:t,query:n})=>r.isError&&!e.isReset()&&!r.isFetching&&Xc(t,[r.error,n]),rd=r=>{r.suspense&&typeof r.staleTime!="number"&&(r.staleTime=1e3)},nd=(r,e)=>r.isLoading&&r.isFetching&&!e,sd=(r,e,t)=>(r==null?void 0:r.suspense)&&nd(e,t),id=(r,e,t)=>e.fetchOptimistic(r).then(({data:n})=>{r.onSuccess==null||r.onSuccess(n),r.onSettled==null||r.onSettled(n,null)}).catch(n=>{t.clearReset(),r.onError==null||r.onError(n),r.onSettled==null||r.onSettled(void 0,n)});function ad(r,e){const t=Kc({context:r.context}),n=Wc(),s=Yc(),i=t.defaultQueryOptions(r);i._optimisticResults=n?"isRestoring":"optimistic",i.onError&&(i.onError=N.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=N.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=N.batchCalls(i.onSettled)),rd(i),Zc(i,s),ed(s);const[a]=b.useState(()=>new e(t,i)),o=a.getOptimisticResult(i);if(Hc(b.useCallback(l=>{const c=n?()=>{}:a.subscribe(N.batchCalls(l));return a.updateResult(),c},[a,n]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),b.useEffect(()=>{a.setOptions(i,{listeners:!1})},[i,a]),sd(i,o,n))throw id(i,a,s);if(td({result:o,errorResetBoundary:s,useErrorBoundary:i.useErrorBoundary,query:a.getCurrentQuery()}))throw o.error;return i.notifyOnChangeProps?o:a.trackResult(o)}function od(r,e,t){const n=Ze(r,e,t);return ad(n,Mc)}const ld=new ri;new kc({queryCache:ld,defaultOptions:{queries:{cacheTime:0}}});const ud=(r,e)=>{if((r==null?void 0:r.data.length)===10)return r.nextPage},cd=async({pageParam:r,queryKey:e})=>{const t=e[1].term;try{let n=Dt.from("posts").select("*, author:profiles (id, name, img, title), category:categories (*), currency:currencies (*)").order("createdAt",{ascending:!1});t&&(n=n.textSearch("textSearch",`'${t}'`));const s=(r?r*10:0)+1,{data:i,error:a}=await n.range(s,s+9);if(i)return{data:i,nextPage:(r??0)+1};if(a)throw a}catch(n){throw console.error(n),n}},dd=r=>od({queryKey:["posts",{term:r??""}],queryFn:cd,getNextPageParam:ud});var Ar=new Map,Et=new WeakMap,Zn=0,hd=void 0;function fd(r){return r?(Et.has(r)||(Zn+=1,Et.set(r,Zn.toString())),Et.get(r)):"0"}function pd(r){return Object.keys(r).sort().filter(e=>r[e]!==void 0).map(e=>`${e}_${e==="root"?fd(r.root):r[e]}`).toString()}function md(r){let e=pd(r),t=Ar.get(e);if(!t){const n=new Map;let s;const i=new IntersectionObserver(a=>{a.forEach(o=>{var l;const c=o.isIntersecting&&s.some(u=>o.intersectionRatio>=u);r.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=c),(l=n.get(o.target))==null||l.forEach(u=>{u(c,o)})})},r);s=i.thresholds||(Array.isArray(r.threshold)?r.threshold:[r.threshold||0]),t={id:e,observer:i,elements:n},Ar.set(e,t)}return t}function yd(r,e,t={},n=hd){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const l=r.getBoundingClientRect();return e(n,{isIntersecting:n,target:r,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:s,observer:i,elements:a}=md(t);let o=a.get(r)||[];return a.has(r)||a.set(r,o),o.push(e),i.observe(r),function(){o.splice(o.indexOf(e),1),o.length===0&&(a.delete(r),i.unobserve(r)),a.size===0&&(i.disconnect(),Ar.delete(s))}}function vd({threshold:r,delay:e,trackVisibility:t,rootMargin:n,root:s,triggerOnce:i,skip:a,initialInView:o,fallbackInView:l,onChange:c}={}){var u;const[d,h]=b.useState(null),f=b.useRef(),[y,v]=b.useState({inView:!!o,entry:void 0});f.current=c,b.useEffect(()=>{if(a||!d)return;let O;return O=yd(d,(S,k)=>{v({inView:S,entry:k}),f.current&&f.current(S,k),k.isIntersecting&&i&&O&&(O(),O=void 0)},{root:s,rootMargin:n,threshold:r,trackVisibility:t,delay:e},l),()=>{O&&O()}},[Array.isArray(r)?r.toString():r,d,s,n,i,a,t,l,e]);const m=(u=y.entry)==null?void 0:u.target,w=b.useRef();!d&&m&&!i&&!a&&w.current!==m&&(w.current=m,v({inView:!!o,entry:void 0}));const _=[h,y.inView,y.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const qt=()=>{const{term:r}=gi(),{data:e,fetchNextPage:t,isLoading:n,hasNextPage:s}=dd(r??""),i=s===void 0||s,{ref:a,inView:o}=vd({threshold:0});return b.useEffect(()=>{!n&&o&&t()},[o,n]),g.jsxs(g.Fragment,{children:[e==null?void 0:e.pages.map(l=>l==null?void 0:l.data.map(c=>g.jsx(qi,{data:c},c.id))),i&&g.jsx(Rt,{ref:a,display:"flex",justifyContent:"center",children:g.jsx(ls,{thickness:"4px",speed:"0.65s",color:"gray.500",size:"xl"})})]})};try{qt.displayName="SearchPage",qt.__docgenInfo={description:"",displayName:"SearchPage",props:{}}}catch{}const Mr=({children:r})=>g.jsxs(g.Fragment,{children:[g.jsx(Ut,{}),g.jsx(ge,{overflow:"auto",px:"5",children:g.jsxs(Rt,{flex:"1",maxW:"container.sm",mx:"auto",children:[r,g.jsx(rs,{}),g.jsx(Rt,{h:"10"})]})})]});try{Mr.displayName="SimpleLayout",Mr.__docgenInfo={description:"",displayName:"SimpleLayout",props:{}}}catch{}bi([{path:Oe.ROOT,element:g.jsx(qr,{}),children:[{path:Oe.ROOT,element:g.jsx(qt,{})},{path:Oe.SEARCH,element:g.jsx(qt,{})}]},{path:Oe.CREATE_POST,element:g.jsx(Mr,{}),children:[{path:Oe.CREATE_POST,element:g.jsx(ki,{})}]}]);const{ToastContainer:sh,toast:Pt}=ia({defaultOptions:yi}),Ee=class Ee{constructor(){Ke(this,"timer")}static getInstance(){return Ee.instance||(Ee.instance=new Ee),Ee.instance}setTimer(){this.timer=setTimeout(()=>this.timer=void 0,1e3)}shouldBlock(){return clearTimeout(this.timer),this.timer?(Pt({title:We.t("warning.title"),status:"warning",description:We.t("warning.spam")}),this.setTimer(),!0):(this.setTimer(),!1)}async signup(e){if(this.shouldBlock())throw new Error("Blocked");return await Dt.auth.signUp(e).then(t=>{var n;if(t.error)throw new nr(t.error.message,t.error.status);return Pt({title:We.t("auth.signup.success.title",{email:(n=t.data.user)==null?void 0:n.email}),status:"success",description:We.t("auth.signup.success.description")}),t}).catch(t=>{throw t instanceof nr?(Pt({title:"Error",description:t.message,status:"error"}),new nr(t.message,t.status)):(Pt({title:We.t("error.title",{status:t.status||t.code}),description:"general error",status:"error"}),new Error(t.message))})}};Ke(Ee,"instance");let Ir=Ee;const gd=new Ir;function at({label:r,name:e,placeholder:t,type:n,isDisabled:s}){var l;const{t:i}=Ae(),{register:a,formState:{errors:o}}=Ei();return g.jsxs(hr,{isInvalid:!!o[e],children:[g.jsx(fr,{children:r}),g.jsx(pr,{...a(e),type:n,required:!0,placeholder:t,isDisabled:s}),g.jsx(ji,{children:i((l=o==null?void 0:o[e])==null?void 0:l.message)})]})}try{at.displayName="FormInput",at.__docgenInfo={description:"",displayName:"FormInput",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"HTMLInputTypeAttribute"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!0,type:{name:"boolean"}}}}}catch{}const bd={email:"",password:"",passwordValidation:""},Dr=({onClose:r})=>{const{t:e}=Ae(),t=is({defaultValues:bd,mode:"onChange",resolver:Ri(Sl)}),n=t.formState.isSubmitting;console.log(t.formState.isSubmitting);const s=async i=>void t.handleSubmit(async a=>{await gd.signup(a).then(()=>r()).catch(o=>o)})(i);return g.jsxs(Pi,{...t,children:[g.jsx(ut,{mode:"signup",isDisabled:n}),g.jsxs("form",{onSubmit:s,role:"form",children:[g.jsx(at,{name:"email",label:e("auth.signup.email.label"),placeholder:e("auth.signup.email.label"),type:"email",isDisabled:n}),g.jsx(at,{name:"password",label:e("auth.signup.password.label"),placeholder:e("auth.signup.password.placeholder"),type:"password",isDisabled:n}),g.jsx(at,{name:"passwordValidation",label:e("auth.signup.validatePassword.label"),placeholder:e("auth.signup.validatePassword.placeholder"),type:"password",isDisabled:n}),g.jsxs(Nt,{w:"100%",variant:"success",mt:"8",type:"submit",isDisabled:n,children:[g.jsx(ls,{size:"sm",mr:"3",hidden:!n}),e("common.signup")]})]})]})};try{Dr.displayName="SignupForm",Dr.__docgenInfo={description:"",displayName:"SignupForm",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}const es=[{label:"common.signup",component:Dr},{label:"common.login",component:br}],$r=({onClose:r,...e})=>{const{t}=Ae();return g.jsxs(Ki,{isCentered:!0,...e,onClose:r,children:[g.jsx(Wi,{}),g.jsxs(Gi,{children:[g.jsx(Rs,{}),g.jsx(Ji,{children:t("auth.modalTitle")}),g.jsx(Yi,{children:g.jsxs(Is,{isFitted:!0,children:[g.jsx(Ds,{children:es.map(n=>g.jsx(Ls,{children:t(n.label)},n.label))}),g.jsx(Fs,{children:es.map(n=>g.jsx($s,{children:g.jsx(n.component,{onClose:r})},n.label))})]})}),g.jsx(Xi,{children:g.jsx(ss,{children:t("auth.tncLink")})})]})]})};try{$r.displayName="AuthModal",$r.__docgenInfo={description:"",displayName:"AuthModal",props:{}}}catch{}const wd=b.createContext({toggle:()=>{}}),Fr=({children:r})=>{const[e,t]=b.useState(!1),n=b.useCallback(()=>t(s=>!s),[]);return g.jsxs(wd.Provider,{value:{toggle:n},children:[r,g.jsx(Zi,{isOpen:e,onClose:()=>t(!e)})]})};try{Fr.displayName="OTPProvider",Fr.__docgenInfo={description:"",displayName:"OTPProvider",props:{}}}catch{}const _d=()=>{const[r,e]=b.useState(null);return b.useEffect(()=>{Dt.auth.getSession().then(({data:{session:n}})=>{e(n)});const{data:{subscription:t}}=Dt.auth.onAuthStateChange((n,s)=>{e(s)});return()=>t.unsubscribe()},[]),r},oi=b.createContext({session:null,toggle:()=>{}}),ts=({children:r})=>{const[e,t]=b.useState(!1),n=_d(),s=b.useCallback(()=>t(i=>!i),[]);return g.jsx(Fr,{children:g.jsxs(oi.Provider,{value:{session:n,toggle:s},children:[r,g.jsx($r,{isOpen:e,onClose:s})]})})},Sd=()=>b.useContext(oi);try{ts.displayName="AuthProvider",ts.__docgenInfo={description:"",displayName:"AuthProvider",props:{}}}catch{}const Lr=()=>{const{session:r,toggle:e}=Sd(),{t}=Ae();return r?g.jsxs(Cs,{children:[g.jsx(ks,{type:"button",children:g.jsx(er,{size:"sm"})}),g.jsxs(Ts,{children:[g.jsxs(ge,{alignItems:"center",justifyContent:"space-between",px:"5",children:[g.jsxs(ge,{flexDir:"column",children:[g.jsx(mr,{fontWeight:"bold",children:"User Name"}),g.jsx(mr,{color:"gray.500",children:"User Email"})]}),g.jsx(er,{size:"lg"})]}),g.jsx(js,{}),g.jsx(Ye,{as:et,to:"/",children:t("userMenu.myAccount")}),g.jsx(Ye,{as:et,to:"/",children:t("userMenu.myPosts")}),g.jsx(Ye,{as:et,to:"/",children:t("userMenu.bookmarked")}),g.jsx(Ye,{children:t("userMenu.logout")})]})]}):g.jsx(er,{size:"sm",p:"0",minW:"unset",as:Nt,onClick:e})};try{Lr.displayName="UserMenu",Lr.__docgenInfo={description:"",displayName:"UserMenu",props:{}}}catch{}const Ut=()=>{const{t:r}=Ae();return g.jsx(ge,{position:"sticky",top:"0",boxShadow:"md",zIndex:"999",bg:"chakra-body-bg",children:g.jsxs(ge,{justifyContent:"space-between",alignItems:"center",minH:vi,px:"5",maxW:"container.lg",width:"full",mx:"auto",children:[g.jsx(mr,{as:"h1",fontSize:"2xl",fontWeight:"bold",children:g.jsx(et,{to:"/",children:"TUTY"})}),g.jsxs(ge,{alignItems:"center",children:[g.jsx(It,{to:Oe.CREATE_POST,children:r("headerMenu.createPost")}),g.jsx(It,{to:Oe.MESSAGES,children:r("headerMenu.message")}),g.jsx(Si,{}),g.jsx(Lr,{})]})]})})};try{Ut.displayName="Header",Ut.__docgenInfo={description:"",displayName:"Header",props:{}}}catch{}const Od=[{category:"mainMenu.hot",items:[{path:"mainMenu.english",title:"mainMenu.english"},{path:"mainMenu.python",title:"mainMenu.python"},{path:"mainMenu.piano",title:"mainMenu.piano"},{path:"mainMenu.japanese",title:"mainMenu.japanese"},{path:"mainMenu.bodyBuild",title:"mainMenu.bodyBuild"},{path:"mainMenu.photography",title:"mainMenu.photography"},{path:"mainMenu.guitar",title:"mainMenu.guitar"},{path:"mainMenu.korean",title:"mainMenu.korean"},{path:"mainMenu.javascript",title:"mainMenu.javascript"}]},{category:"mainMenu.programming",items:[{path:"mainMenu.python",title:"mainMenu.python"},{path:"mainMenu.javascript",title:"mainMenu.javascript"},{path:"mainMenu.leetcode",title:"mainMenu.leetcode"},{path:"mainMenu.htmlCss",title:"mainMenu.htmlCss"},{path:"mainMenu.wordpress",title:"mainMenu.wordpress"},{path:"mainMenu.frontend",title:"mainMenu.frontend"},{path:"mainMenu.backend",title:"mainMenu.backend"},{path:"mainMenu.ios",title:"mainMenu.ios"},{path:"mainMenu.android",title:"mainMenu.android"},{path:"mainMenu.cpp",title:"mainMenu.cpp"},{path:"mainMenu.java",title:"mainMenu.java"}]},{category:"mainMenu.language",items:[{path:"mainMenu.english",title:"mainMenu.english"},{path:"mainMenu.englishSpeaking",title:"mainMenu.englishSpeaking"},{path:"mainMenu.toeic",title:"mainMenu.toeic"},{path:"mainMenu.ielts",title:"mainMenu.ielts"},{path:"mainMenu.toefl",title:"mainMenu.toefl"},{path:"mainMenu.japanese",title:"mainMenu.japanese"},{path:"mainMenu.korean",title:"mainMenu.korean"},{path:"mainMenu.chinese",title:"mainMenu.chinese"},{path:"mainMenu.spanish",title:"mainMenu.spanish"},{path:"mainMenu.french",title:"mainMenu.french"}]},{category:"mainMenu.artAndDesign",items:[{path:"mainMenu.graphicDesign",title:"mainMenu.graphicDesign"},{path:"mainMenu.illustratorAndPhotoshop",title:"mainMenu.illustratorAndPhotoshop"},{path:"mainMenu.uiux",title:"mainMenu.uiux"},{path:"mainMenu.webDesign",title:"mainMenu.webDesign"},{path:"mainMenu.computerGraphic",title:"mainMenu.computerGraphic"},{path:"mainMenu.postProduction",title:"mainMenu.postProduction"},{path:"mainMenu.painting",title:"mainMenu.painting"},{path:"mainMenu.illustration",title:"mainMenu.illustration"},{path:"mainMenu.3d",title:"mainMenu.3d"},{path:"mainMenu.photography",title:"mainMenu.photography"}]},{category:"mainMenu.music",items:[{path:"mainMenu.guitar",title:"mainMenu.guitar"},{path:"mainMenu.piano",title:"mainMenu.piano"},{path:"mainMenu.singing",title:"mainMenu.singing"},{path:"mainMenu.ukulele",title:"mainMenu.ukulele"},{path:"mainMenu.musicTheory",title:"mainMenu.musicTheory"}]},{category:"mainMenu.sportsAndActivities",items:[{path:"mainMenu.bodyBuild",title:"mainMenu.bodyBuild"},{path:"mainMenu.weightTraining",title:"mainMenu.weightTraining"},{path:"mainMenu.yoga",title:"mainMenu.yoga"},{path:"mainMenu.swimming",title:"mainMenu.swimming"},{path:"mainMenu.boxing",title:"mainMenu.boxing"},{path:"mainMenu.martialArt",title:"mainMenu.martialArt"},{path:"mainMenu.skateBoarding",title:"mainMenu.skateBoarding"},{path:"mainMenu.badminton",title:"mainMenu.badminton"}]},{category:"mainMenu.business",items:[{path:"mainMenu.financial",title:"mainMenu.financial"},{path:"mainMenu.marketing",title:"mainMenu.marketing"},{path:"mainMenu.entrepreneurship",title:"mainMenu.entrepreneurship"},{path:"mainMenu.socialMedia",title:"mainMenu.socialMedia"},{path:"mainMenu.editor",title:"mainMenu.editor"},{path:"mainMenu.excel",title:"mainMenu.excel"},{path:"mainMenu.ppt",title:"mainMenu.ppt"},{path:"mainMenu.presentation",title:"mainMenu.presentation"},{path:"mainMenu.pitching",title:"mainMenu.pitching"},{path:"mainMenu.gooogleAds",title:"mainMenu.gooogleAds"},{path:"mainMenu.seo",title:"mainMenu.seo"}]},{category:"mainMenu.selfGrowth",items:[{path:"mainMenu.entrepreneurship",title:"mainMenu.entrepreneurship"},{path:"mainMenu.investment",title:"mainMenu.investment"},{path:"mainMenu.stock",title:"mainMenu.stock"},{path:"mainMenu.nationalExam",title:"mainMenu.nationalExam"},{path:"mainMenu.health",title:"mainMenu.health"},{path:"mainMenu.cooking",title:"mainMenu.cooking"},{path:"mainMenu.fortuneTelling",title:"mainMenu.fortuneTelling"}]}],qr=({children:r})=>g.jsxs(g.Fragment,{children:[g.jsx(Ut,{}),g.jsxs(ge,{h:"100%",w:"100%",maxW:"container.lg",mx:"auto",children:[g.jsx(ds,{below:"md",children:g.jsx(_i,{menu:Od})}),g.jsxs(Rt,{p:"5",flex:"1",children:[r,g.jsx(rs,{})]})]})]});try{qr.displayName="MainLayout",qr.__docgenInfo={description:"",displayName:"MainLayout",props:{}}}catch{}export{$r as A,Ut as H,qr as M};
//# sourceMappingURL=MainLayout-e3e30b8d.js.map
