import{_ as R,b as k,c as F,g as B,d as H,e as J}from"./nonIterableRest-884f82cb.js";import{_ as M}from"./createClass-d459cbf5.js";import{r as g}from"./index-8db94870.js";import{I as U,R as W}from"./context-27f4b450.js";function D(){if(console&&console.warn){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];typeof n[0]=="string"&&(n[0]="react-i18next:: ".concat(n[0])),(t=console).warn.apply(t,n)}}var T={};function N(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&T[e[0]]||(typeof e[0]=="string"&&(T[e[0]]=new Date),D.apply(void 0,e))}function E(t,e,n){t.loadNamespaces(e,function(){if(t.isInitialized)n();else{var a=function i(){setTimeout(function(){t.off("initialized",i)},0),n()};t.on("initialized",a)}})}function K(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=e.languages[0],i=e.options?e.options.fallbackLng:!1,c=e.languages[e.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var r=function(o,u){var m=e.services.backendConnector.state["".concat(o,"|").concat(u)];return m===-1||m===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!r(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(a,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||r(a,t)&&(!i||r(c,t)))}function Y(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return N("i18n.languages were undefined or empty",e.languages),!0;var a=e.options.ignoreJSONStructure!==void 0;return a?e.hasLoadedNamespace(t,{precheck:function(c,r){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&c.services.backendConnector.backend&&c.isLanguageChangingTo&&!r(c.isLanguageChangingTo,t))return!1}}):K(t,e,n)}function q(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,c,r,p=[],o=!0,u=!1;try{if(c=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;o=!1}else for(;!(o=(a=c.call(n)).done)&&(p.push(a.value),p.length!==e);o=!0);}catch(m){u=!0,i=m}finally{try{if(!o&&n.return!=null&&(r=n.return(),Object(r)!==r))return}finally{if(u)throw i}}return p}}function G(t,e){return R(t)||q(t,e)||k(t,e)||F()}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A(Object(n),!0).forEach(function(a){H(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}var Q=function(e,n){var a=g.useRef();return g.useEffect(function(){a.current=n?a.current:e},[e,n]),a.current};function _(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.i18n,a=g.useContext(U)||{},i=a.i18n,c=a.defaultNS,r=n||i||J();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new W),!r){N("You will need to pass in an i18next instance by using initReactI18next");var p=function(d,f){return typeof f=="string"?f:f&&M(f)==="object"&&typeof f.defaultValue=="string"?f.defaultValue:Array.isArray(d)?d[d.length-1]:d},o=[p,{},!1];return o.t=p,o.i18n={},o.ready=!1,o}r.options.react&&r.options.react.wait!==void 0&&N("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var u=I(I(I({},B()),r.options.react),e),m=u.useSuspense,P=u.keyPrefix,s=t||c||r.options&&r.options.defaultNS;s=typeof s=="string"?[s]:s||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(s);var v=(r.isInitialized||r.initializedStoreOnce)&&s.every(function(l){return Y(l,r,u)});function y(){return r.getFixedT(null,u.nsMode==="fallback"?s:s[0],P)}var z=g.useState(y),x=G(z,2),j=x[0],w=x[1],S=s.join(),C=Q(S),b=g.useRef(!0);g.useEffect(function(){var l=u.bindI18n,d=u.bindI18nStore;b.current=!0,!v&&!m&&E(r,s,function(){b.current&&w(y)}),v&&C&&C!==S&&b.current&&w(y);function f(){b.current&&w(y)}return l&&r&&r.on(l,f),d&&r&&r.store.on(d,f),function(){b.current=!1,l&&r&&l.split(" ").forEach(function(O){return r.off(O,f)}),d&&r&&d.split(" ").forEach(function(O){return r.store.off(O,f)})}},[r,S]);var L=g.useRef(!0);g.useEffect(function(){b.current&&!L.current&&w(y),L.current=!1},[r,P]);var h=[j,r,v];if(h.t=j,h.i18n=r,h.ready=v,v||!v&&!m)return h;throw new Promise(function(l){E(r,s,function(){l()})})}export{_ as u};
//# sourceMappingURL=useTranslation-ec8eb1cc.js.map
